import{d as oe,u as ne,i as e,e as le,c as V,k as Ce,m as _,F as te,a8 as re,o as l,a as u,n as a,g as I,w as s,t as S,b as n,q as N,I as T,p as U,ac as ce,P as ue,bP as Te,ab as Se,v as ae,X as se,z as Ve,_ as G,H as pe,bQ as Ie,bR as Ae,bS as Me,Q as Ee,K as me,bT as fe,a4 as Le,s as Be,G as Oe,bU as $e,a9 as de,b7 as ze,M as Z,N as ee,aa as He,al as Ne,j as De,ax as Pe,ay as Ue,a0 as We,x as Re,b2 as qe}from"./index-fER-Z0jW.js";import{E as Fe}from"./el-infinite-scroll-BEUhWpVk.js";import{E as je}from"./el-drawer-O_mTgUQJ.js";import{E as _e}from"./el-empty-DLnKRbiB.js";import{d as Ge,E as Ke,a as Qe,_ as Xe}from"./dataStructure-Dm1bOXz8.js";import"./el-checkbox-DDXe9Vfq.js";import{l as Je}from"./vue-draggable-plus-BYiuCoxz.js";import{L as Ye}from"./Loading-D8Kz5wui.js";import"./isArrayLikeObject-C0F6t5UH.js";/* empty css                        */const Ze={class:"api-header drag-handle"},et={class:"info"},tt={key:0,class:"api-details"},ot={class:"api-details-item"},nt={key:0,class:"api-details-item"},lt={key:0},at={key:1},st={key:0},it={key:1},ut={class:"api-details-item"},dt={class:"example-title"},rt=oe({__name:"ApiDocumentItem",props:{model:{type:Object},showHover:{type:Boolean,default:!0}},setup(r){ne(i=>({"4e5e3bf6":e(C),"085b3338":e(A),bc8a9508:e(x),"0f6d9d3c":e(P),"60e68354":e(D),"9e35f198":e(R),"542b76ad":e(M)}));const{appAsideBgColor:x,appBackground:A}=le(),b=r,D=V(()=>b.showHover?"4px":"0px"),P=V(()=>b.showHover?"all 0.5s":"none"),f=Ce(),v=V(()=>{const i=b.model?.dialog;return{...i,args:i?.args?.map(t=>(t.componentType==="select"&&t.options&&typeof t.options=="function"&&(t.options=t.options(f)),{...t}))}}),B=V(()=>v.value?.title||v.value?.targetMethodName),{invokeDynamicDialog:w}=ce(),c=_(),k=_(!1),C=_("40px"),M=_("hidden"),O=()=>{const i=!k.value;if(i&&!b.model?.document){ue.closeAll(),ue({title:"该API暂无使用文档",type:"warning",position:"bottom-right"});return}if(i){const t=setTimeout(async()=>{clearTimeout(t),M.value="auto",await W()})}else M.value="hidden";k.value=i},g=_("");te(()=>{const i=b.model?.document?.example?.code;i&&(g.value=i)});const K=()=>{if(g.value.length){const i=v.value?.targetMethodName,t=Te().find(y=>y.name===i);t?t.testModule?.document?.example?.code&&(t.testModule.document.example.code=g.value):console.error(`重置示例失败：未找到${i}的测试模块`)}},W=async()=>{const i=document.body.clientHeight;if(k.value){await Se();const t=c.value?.clientHeight||0,y=Math.min(t?t+22:0,420+(i-661>0?(i-661)/2:0));R.value=y+"px",C.value=40+y+"px"}else C.value="40px"},R=_("420px");re(async()=>{b.model?.document?.example?.code,await W()});const Q=V(()=>Ge.genTreeArrNodeId(b.model?.document?.params||[]));return(i,t)=>{const y=ae,X=se,$=Ve,h=Ke,H=Qe,q=Xe,E=_e;return l(),u("div",{class:"api-doc-item",onClick:O},[a("div",Ze,[a("div",et,[e(k)?(l(),I(y,{key:1,class:"icon"},{default:s(()=>t[6]||(t[6]=[a("span",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(l(),I(y,{key:0,class:"icon"},{default:s(()=>t[5]||(t[5]=[a("span",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),a("span",null,"["+S(e(v)?.targetMethodName)+"]"+S(e(B)),1)]),n($,{effect:"dark",content:"测试调用",placement:"left"},{default:s(()=>[n(X,{size:"small",type:"primary",circle:"",onClick:t[0]||(t[0]=N(L=>e(w)(e(v)?.targetMethodName,e(v)?.targetMethodName,e(v)?.content,"test"),["stop"]))},{default:s(()=>[n(y,{size:"large"},{default:s(()=>t[7]||(t[7]=[a("span",{"i-mdi-bug-play":""},null,-1)])),_:1})]),_:1})]),_:1})]),e(k)?(l(),u("div",tt,[r.model?.document?(l(),u("div",{key:0,class:"content",ref_key:"detailsContentRef",ref:c},[a("div",ot,[t[8]||(t[8]=a("span",null,"方法名：",-1)),a("span",null,S(e(v)?.targetMethodName),1)]),r.model.document.howToUse?(l(),u("div",nt,[t[9]||(t[9]=a("span",null,"方法描述：",-1)),a("span",null,S(r.model.document.howToUse),1)])):T("",!0),r.model.document.params?(l(),u("div",{key:1,class:"api-details-item",onClick:t[1]||(t[1]=N(()=>{},["stop"]))},[t[12]||(t[12]=a("span",null,"参数：",-1)),n(H,{"default-expand-all":"",data:e(Q),"table-layout":"auto","row-key":"id"},{default:s(()=>[n(h,{prop:"name",label:"参数名"}),n(h,{prop:"required",label:"必填"},{default:s(L=>[L.row.required?(l(),u("span",lt,"是")):(l(),u("span",at,"否"))]),_:1}),n(h,{prop:"instructions",label:"说明",width:"240"}),n(h,{prop:"type",label:"类型"},{default:s(L=>[typeof L.row.type=="string"?(l(),u("span",st,S(L.row.type),1)):(l(),u("span",it,[t[11]||(t[11]=U("enum")),n($,{effect:"dark",content:L.row.type?.join(",")||"",placement:"top-start"},{default:s(()=>[n(y,null,{default:s(()=>t[10]||(t[10]=[a("span",{"i-mdi-information-variant":""},null,-1)])),_:1})]),_:2},1032,["content"])]))]),_:1}),n(h,{prop:"default",label:"默认值"})]),_:1},8,["data"])])):T("",!0),a("div",ut,[t[13]||(t[13]=a("span",null,"返回值：",-1)),a("span",null,S(r.model.document.returnValue.instructions||""),1),r.model.document.returnValue.type?(l(),I(q,{key:0,"raw-code":r.model.document.returnValue.type,"show-copy":!1,onClick:t[2]||(t[2]=N(()=>{},["stop"]))},null,8,["raw-code"])):T("",!0)]),r.model.document.example?(l(),u("div",{key:2,class:"api-details-item",onClick:t[4]||(t[4]=N(()=>{},["stop"]))},[a("span",dt,[r.model.document.example.code!==e(g)?(l(),I($,{key:0,effect:"dark",content:"恢复默认示例代码",placement:"top-start"},{default:s(()=>[n(y,{class:"refreshCode",onClick:N(K,["stop"])},{default:s(()=>t[14]||(t[14]=[a("span",{"i-mdi-file-sync-outline":""},null,-1)])),_:1})]),_:1})):T("",!0),t[15]||(t[15]=U("示例："))]),a("span",null,S(r.model.document.example.title),1),n(q,{"raw-code":r.model.document.example.code,onClick:t[3]||(t[3]=N(()=>{},["stop"]))},null,8,["raw-code"])])):T("",!0)],512)):(l(),I(E,{key:1,description:"该API暂无使用文档"}))])):T("",!0)])}}}),ct=G(rt,[["__scopeId","data-v-6fd8ac5d"]]),pt={class:"header-r"},mt=oe({__name:"ATHeader",props:{openOutput:{type:Function,required:!0},changeSearchValue:{type:Function,required:!0}},setup(r){ne(w=>({"7e8b9e4f":e(P),"5b059ea7":e(D)}));const x=_(""),A=()=>{Ie().hide(),Ae().then(w=>{w.find(k=>k.label==="main")?.setFocus()})},{isMainWindow:b}=fe(),{appAsideBgColor:D,appBackground:P}=le();let f=0,v;const B=()=>{++f>3&&Me.confirm("是否前往首页","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b&&(b.value=!0),Ee.push("/")}),v&&clearTimeout(v),v=setTimeout(()=>{f=0},500)};return(w,c)=>{const k=me,C=ae,M=se;return l(),u("div",null,[a("div",{"data-tauri-drag-region":"",style:{width:"25%",cursor:"move"}},[a("span",{onClick:B},"调试")]),a("div",pt,[c[4]||(c[4]=a("div",{"data-tauri-drag-region":"",style:{cursor:"move"},class:"move"},null,-1)),n(k,{onInput:c[0]||(c[0]=O=>r.changeSearchValue(e(x))),class:"input",modelValue:e(x),"onUpdate:modelValue":c[1]||(c[1]=O=>pe(x)?x.value=O:null),clearable:"",placeholder:"可输入API的关键字对API进行筛选"},null,8,["modelValue"]),n(M,{class:"circle-btn",type:"info",circle:"",onClick:r.openOutput},{default:s(()=>[n(C,null,{default:s(()=>c[2]||(c[2]=[a("span",{"i-solar-notification-unread-linear":""},null,-1)])),_:1})]),_:1},8,["onClick"]),n(M,{class:"circle-btn",type:"info",circle:"",onClick:A},{default:s(()=>[n(C,null,{default:s(()=>c[3]||(c[3]=[a("span",{"i-mdi-minus":""},null,-1)])),_:1})]),_:1})])])}}}),ft=G(mt,[["__scopeId","data-v-37c685b8"]]),_t={class:"remd"},vt={key:0,class:"api-test-bar","data-tauri-drag-region":"",style:{cursor:"move"}},gt={key:1,class:"end"},wt={class:"loading-box"},yt=["id"],ht={key:1,class:"empty-show"},bt=oe({__name:"APITestView",setup(r){ne(m=>({e9d5059a:e(O),e8c4eec0:e(M)}));const x=_(!0),A=_(),{builtInApiTestModules:b,moveBuiltInApiIndex:D,setTestModuleCtx:P}=ce(),{info:f,windowInnerWidth:v}=De(),B=Le(),{app:w}=Be(B),c=_(!0),k=_(!1),{isMainWindow:C}=fe(),{appBackground:M}=le(),O=_("10px"),g=_(""),K=V(()=>g.value!==""),W=()=>{x.value=!1},R=()=>{x.value=!0},Q=m=>{const{oldIndex:o,newIndex:d}=m;o!==void 0&&d!==void 0&&D(o,d),R()},i=_([]),t=()=>{i.value=[]},y=V(()=>f.showContentType==="apiTest"&&v.value<820),X=V(()=>+w.value.modulesSetting.drawerSize.replace("%","")*3-40);let $=null;re(()=>{const m=f.apiTest.searchValue;$&&clearTimeout($),$=setTimeout(()=>{g.value!==m&&(g.value=m)},500)});const h=_(0);let H=0;te(()=>{const m=A.value;h.value=Math.ceil(m.offsetHeight/43)+1;const o=setTimeout(()=>{c.value=!1,clearTimeout(o)},500);B.isInited||B.init(),Oe.closeSplashscreen()});const q=async()=>{h.value<H?h.value=Math.min(h.value+5,H):h.value===H&&(k.value=!0)},E=V({get:()=>{const m=[...b.value.filter(o=>g.value?o.dialog.targetMethodName?.toLocaleLowerCase()?.includes(g.value?.toLocaleLowerCase())||o.dialog.title?.toLocaleLowerCase()?.includes(g.value?.toLocaleLowerCase())||o.dialog.content?.toLocaleLowerCase()?.includes(g.value?.toLocaleLowerCase())||o.document.howToUse?.toLocaleLowerCase()?.includes(g.value?.toLocaleLowerCase())||o.document.searchKeys?.some(d=>d?.toLocaleLowerCase().includes(g.value?.toLocaleLowerCase())):!0)].sort((o,d)=>d.weight-o.weight);return H=m.length,m.slice(0,h.value)},set:m=>{h.value=m.length}});$e(()=>{C.value||(O.value="0")});const L=(m,o="")=>{w.value.modulesSetting.autoOpenOutput&&(f.apiTest.openOutput=!0);const d=new Date,J=d.getHours()<10?"0"+d.getHours():d.getHours(),F=d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes(),j=d.getSeconds()<10?"0"+d.getSeconds():d.getSeconds(),Y=`[${J}:${F}:${j}] `;i.value.unshift(Y+o+"：	"+m)};return te(()=>{P({showDetails:L})}),(m,o)=>{const d=ft,J=me,F=ae,j=se,Y=ct,ie=_e,ve=Pe,ge=Ue,we=We,ye=Re,he=qe,be=je,ke=Fe;return l(),u("div",_t,[e(C)?T("",!0):(l(),I(d,{key:0,class:"alone-page-header",openOutput:()=>e(f).apiTest.openOutput=!0,changeSearchValue:p=>e(f).apiTest.searchValue=p},null,8,["openOutput","changeSearchValue"])),de((l(),u("div",{class:"page-content",ref_key:"pageContentRef",ref:A,"infinite-scroll-distance":40,"infinite-scroll-immediate":!1},[n(ze,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:s(()=>[e(y)&&e(C)?(l(),u("div",vt,[n(J,{class:"search-ipt",modelValue:e(f).apiTest.searchValue,"onUpdate:modelValue":o[0]||(o[0]=p=>e(f).apiTest.searchValue=p),clearable:"",placeholder:"可输入API的关键字对API进行筛选"},null,8,["modelValue"]),n(j,{class:"output-btn",onClick:o[1]||(o[1]=p=>e(f).apiTest.openOutput=!0)},{default:s(()=>[n(F,null,{default:s(()=>o[6]||(o[6]=[a("span",{"i-solar-notification-unread-linear":""},null,-1)])),_:1})]),_:1})])):T("",!0)]),_:1}),n(e(Je),{ref:"el",modelValue:e(E),"onUpdate:modelValue":o[2]||(o[2]=p=>pe(E)?E.value=p:null),animation:200,ghostClass:"ghost",class:"draggable-content",handle:".drag-handle",disabled:e(K),onUpdate:Q,onStart:W},{default:s(()=>[(l(!0),u(Z,null,ee(e(E),p=>(l(),I(Y,{key:p?.dialog?.targetMethodName||p?.dialog?.title,model:p,"show-hover":e(x)},null,8,["model","show-hover"]))),128))]),_:1},8,["modelValue","disabled"]),e(E).length?T("",!0):(l(),I(ie,{key:0,description:"没有找到相应的API"})),e(k)?(l(),u("div",gt," ------到底了，共"+S(e(E).length)+"个API------ ",1)):T("",!0),de(a("div",wt,[n(Ye),o[7]||(o[7]=U("加载中... "))],512),[[He,e(c)]])])),[[ke,q]]),n(be,{modelValue:e(f).apiTest.openOutput,"onUpdate:modelValue":o[5]||(o[5]=p=>e(f).apiTest.openOutput=p),title:"",direction:"btt",size:e(w).modulesSetting.drawerSize,class:"drawer-output"},{header:s(({titleId:p,titleClass:xe})=>[a("h4",{id:p,class:Ne(xe)},"API测试-输出结果",10,yt),n(ge,{modelValue:e(w).modulesSetting.drawerSize,"onUpdate:modelValue":o[3]||(o[3]=z=>e(w).modulesSetting.drawerSize=z),placeholder:"大小",size:"small",class:"options select"},{default:s(()=>[(l(),u(Z,null,ee(8,z=>n(ve,{key:z,label:20+z*10+"%",value:20+z*10+"%"},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n(we,{class:"options",modelValue:e(w).modulesSetting.autoOpenOutput,"onUpdate:modelValue":o[4]||(o[4]=z=>e(w).modulesSetting.autoOpenOutput=z),"inline-prompt":"",style:{"--el-switch-on-color":"var(--el-color-primary)","--el-switch-off-color":"#ccc"},"active-text":"自动显示","inactive-text":"手动显示"},null,8,["modelValue"]),n(j,{class:"options",size:"small",onClick:t},{default:s(()=>[n(F,null,{default:s(()=>o[8]||(o[8]=[a("span",{"i-mdi-playlist-remove":""},null,-1)])),_:1}),o[9]||(o[9]=U("清空输出 "))]),_:1})]),default:s(()=>[e(i).length?(l(),I(he,{key:0,class:"output"},{default:s(()=>[(l(!0),u(Z,null,ee(e(i),p=>(l(),u("div",{key:p,class:"output-text"},[n(ye,{size:"small"},{default:s(()=>[U(S(p),1)]),_:2},1024)]))),128))]),_:1})):(l(),u("div",ht,[n(ie,{description:"暂无输出","image-size":e(X),style:{"margin-top":"-40px"}},null,8,["image-size"])]))]),_:1},8,["modelValue","size"])])}}}),kt=G(bt,[["__scopeId","data-v-12dc2072"]]),xt={},Ct={class:"api-test"};function Tt(r,x){const A=kt;return l(),u("div",Ct,[n(A)])}const zt=G(xt,[["render",Tt],["__scopeId","data-v-8499a071"]]);export{zt as default};
