import{_ as rt}from"./CodeIcon-CSx7SdU2.js";import{d as W,u as Y,i as s,j as Q,s as Z,e as tt,c as b,k as u,l as E,o as L,a as X,m as e,g as M,w as i,t as I,b as n,n as C,p as S,E as ut,q as dt,v as pt,_ as et,x as ct,y as mt,z as vt,A as O,B as ft,C as gt,F as St,D as _t,I as kt,G as F,H as P,J as yt,K as J,S as K,L as Ct,M as bt,N as Lt,f as xt}from"./index-t6s3gKzR.js";import{E as wt}from"./el-empty-C7IlroIa.js";import{E as It}from"./el-affix-W80Es_Tw.js";/* empty css                        */import{l as Et}from"./vue-draggable-plus-zCK3jBRr.js";const Vt={class:"content drag-handle"},At={class:"info"},Bt={class:"menu"},Dt=W({__name:"ScriptListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editorScriptFile","openFile","setScript","runScript","deleteScript"],setup(j,{emit:R}){Y(v=>({"4dff7f10":s(h),da99322e:s(A),d064742e:s(U),f79ae1de:s(H),"04ab8aee":s(m)}));const N=Q();Z(N);const{appAsideBgColor:A,appBackground:H}=tt(),c=j,m=b(()=>c.showHover?"4px":"0px"),U=b(()=>c.showHover?"all 0.5s":"none"),x=R,w=b(()=>u().mockScriptList.value.find(v=>v.id===c.id)),a=b(()=>u().mockScriptList.value.findIndex(v=>v.id===c.id)),_=E(!1),V=()=>{a.value!==void 0&&a.value!==-1&&x("deleteScript",a.value)},$=()=>{a.value!==void 0&&a.value!==-1&&x("editorScriptFile",a.value)},k=()=>{a.value!==void 0&&a.value!==-1&&x("openFile",a.value)},z=()=>{a.value!==void 0&&a.value!==-1&&x("setScript",a.value)},B=()=>{a.value!==void 0&&a.value!==-1&&x("runScript",a.value)},d=E(),h=b(()=>_.value?40+d.value.clientHeight+"px":"40px");return(v,o)=>{const f=ut,G=dt,y=pt,q=rt;return L(),X("div",{class:"script-item",onClick:o[3]||(o[3]=g=>_.value=!s(_))},[e("div",Vt,[e("div",At,[s(_)?(L(),M(f,{key:1,class:"icon",size:"large"},{default:i(()=>o[5]||(o[5]=[e("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(L(),M(f,{key:0,class:"icon",size:"large"},{default:i(()=>o[4]||(o[4]=[e("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),e("span",null,I(s(w).name),1),n(G,{size:"small",type:"info"},{default:i(()=>[C(I(s(w).version),1)]),_:1})]),e("div",Bt,[n(y,{class:"box-item",effect:"dark",content:"从列表移除",placement:"bottom"},{default:i(()=>[n(f,{class:"icon",onClick:S(V,["stop"])},{default:i(()=>o[6]||(o[6]=[e("span",{"i-mdi-playlist-remove":""},null,-1)])),_:1})]),_:1}),n(y,{class:"box-item",effect:"dark",content:"编辑脚本",placement:"bottom"},{default:i(()=>[n(q,{class:"icon",onClick:S($,["stop"])})]),_:1}),n(y,{class:"box-item",effect:"dark",content:"打开脚本",placement:"bottom"},{default:i(()=>[n(f,{class:"icon",onClick:S(k,["stop"])},{default:i(()=>o[7]||(o[7]=[e("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1}),n(y,{class:"box-item",effect:"dark",content:"脚本设置",placement:"bottom"},{default:i(()=>[n(f,{class:"icon",onClick:S(z,["stop"])},{default:i(()=>o[8]||(o[8]=[e("span",{"i-solar-settings-linear":""},null,-1)])),_:1})]),_:1}),n(y,{class:"box-item",effect:"dark",content:"运行脚本",placement:"bottom"},{default:i(()=>[n(f,{class:"icon",onClick:S(B,["stop"])},{default:i(()=>o[9]||(o[9]=[e("span",{"i-mdi-play-circle-outline":""},null,-1)])),_:1})]),_:1})])]),e("div",{class:"details",ref_key:"detailsRef",ref:d},[o[10]||(o[10]=e("div",null,"脚本ID：",-1)),e("div",{class:"text",onClick:o[0]||(o[0]=S(()=>{},["stop"]))},I(s(w).id),1),o[11]||(o[11]=e("div",null,"保存路径：",-1)),e("div",{class:"text",onClick:o[1]||(o[1]=S(()=>{},["stop"]))},I(s(w).savePath),1),o[12]||(o[12]=e("div",null,"脚本描述(备注)：",-1)),e("div",{class:"description",onClick:o[2]||(o[2]=S(()=>{},["stop"]))},I(s(w).description),1)],512)])}}}),Tt=et(Dt,[["__scopeId","data-v-b67c9a44"]]),Ft={class:"script-list-div"},Pt={class:"dialog-footer"},Mt={class:"dialog-footer"},Rt={class:"header"},Nt={class:"header-right"},Ht={class:"list"},Ut=W({__name:"ScriptList",setup(j){Y(l=>({"6f396afc":s($)}));const R=kt,N=E();let A=()=>{};const H=Q(),{scriptList:c}=Z(H),{openId:m,curScriptDir:U,preloadPath:x,preloadText:w,contentTransform:a,asideBarPos:_}=xt(),V=E(!0),{appBackground:$}=tt(),k=ct({visible:!1,content:"",newImport:()=>{},updateImport:()=>{}}),z=()=>{V.value=!1},B=()=>{V.value=!0},d=E(!1),h=l=>{A=()=>{u().mockScriptList.value.splice(l,1),F({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),d.value=!1},d.value=!0},v=l=>{a.value="translateX(-100%)",P.replace("/script/editor");let t=c.value[l]?.id,p="";t=u().mockScriptList.value[l]?.id,p="E:\\playground",t===m.value&&(m.value="-1");const T=setTimeout(async()=>{m.value=t,U.value=p||await yt.resolve(c.value[l].savePath,"../"),clearTimeout(T)},100);_.value="absolute"},o=async l=>{{F({title:"提示",message:"playground环境不支持打开文件",type:"warning",position:"bottom-right"});return}},f=()=>{{const l=J(),t="v1."+Math.floor(Math.random()*10);u().mockScriptList.value.push({id:l,savePath:"内部存储",name:l,version:t,description:"playground环境测试脚本",setting:{autoImportLastRunConfig:!0,targetAdbDevice:"",excludeDevice:[],targetApp:"",autoStartTargetApp:!1},content:K(l,t,"playground环境测试脚本")}),F({title:"提示",message:"创建成功",type:"success",position:"bottom-right"}),m.value=l,P.replace({path:"/script/editor"}),a.value="translateX(-100%)",_.value="absolute";return}},G=async()=>{{const l=J(),t="v1."+Math.floor(Math.random()*10);u().mockScriptList.value.push({id:l,savePath:"内部存储",name:l,version:t,description:"playground环境测试脚本",setting:{autoImportLastRunConfig:!0,targetAdbDevice:"",excludeDevice:[],targetApp:"",autoStartTargetApp:!1},content:K(l,t,"playground环境测试脚本")}),F({title:"提示",message:"导入成功",type:"success",position:"bottom-right"});return}},y=async l=>{m.value=u().mockScriptList.value[l].id,P.replace("/script/run")},q=l=>{m.value=u().mockScriptList.value[l].id,P.replace("/script/setting")},g=E(""),ot=b(()=>g.value!==""),D=b({get:()=>g.value===""?u().mockScriptList.value:u().mockScriptList.value.filter(l=>l.name.toLowerCase().includes(g.value.toLowerCase())||l.description.toLowerCase().includes(g.value.toLowerCase())),set:l=>{{u().mockScriptList.value=l;return}}});return mt(()=>{vt.closeSplashscreen()}),(l,t)=>{const p=Ct,T=gt,st=bt,lt=Lt,it=It,nt=wt,at=Tt;return L(),X("div",Ft,[n(T,{modelValue:s(k).visible,"onUpdate:modelValue":t[0]||(t[0]=r=>s(k).visible=r),title:"脚本导入"},{footer:i(()=>[e("span",Pt,[n(p,{onClick:s(k).newImport},{default:i(()=>t[5]||(t[5]=[C("作为新脚本导入")])),_:1},8,["onClick"]),n(p,{onClick:s(k).updateImport},{default:i(()=>t[6]||(t[6]=[C("更新同名脚本")])),_:1},8,["onClick"])])]),default:i(()=>[e("div",null,I(s(k).content),1),t[7]||(t[7]=e("div",null,"作为新脚本导入：",-1)),t[8]||(t[8]=e("div",null," 此选项会在脚本列表新增一项脚本，该脚本无法继承同名脚本配置(id不一致) ",-1)),t[9]||(t[9]=e("div",null,"更新同名脚本：",-1)),t[10]||(t[10]=e("div",null," 此选项会将新脚本内容覆盖掉同名脚本，该脚本可以继承同名脚本配置(id一致) ",-1))]),_:1},8,["modelValue"]),n(T,{modelValue:s(d),"onUpdate:modelValue":t[2]||(t[2]=r=>O(d)?d.value=r:null),title:"删除脚本"},{footer:i(()=>[e("span",Mt,[n(p,{onClick:t[1]||(t[1]=r=>d.value=!1)},{default:i(()=>t[11]||(t[11]=[C("取消")])),_:1}),n(p,{type:"danger",onClick:s(A)},{default:i(()=>t[12]||(t[12]=[C("删除")])),_:1},8,["onClick"])])]),default:i(()=>[t[13]||(t[13]=e("div",null,"确定要删除该脚本吗?",-1))]),_:1},8,["modelValue"]),n(it,{target:".script-list-div",offset:40},{default:i(()=>[e("div",Rt,[t[16]||(t[16]=e("span",{style:{"font-size":"18px"}},"脚本列表",-1)),e("div",Nt,[n(st,{class:"input",modelValue:s(g),"onUpdate:modelValue":t[3]||(t[3]=r=>O(g)?g.value=r:null),clearable:"",placeholder:"搜索脚本名称或备注"},null,8,["modelValue"]),n(lt,null,{default:i(()=>[n(p,{onClick:G},{default:i(()=>t[14]||(t[14]=[C("导入")])),_:1}),n(p,{type:"primary",onClick:f},{default:i(()=>t[15]||(t[15]=[C("新建")])),_:1})]),_:1})])])]),_:1}),e("div",Ht,[!s(R)&&s(c).length===0?(L(),M(nt,{key:0,description:"暂无脚本"})):ft("",!0),n(s(Et),{ref_key:"el",ref:N,modelValue:s(D),"onUpdate:modelValue":t[4]||(t[4]=r=>O(D)?D.value=r:null),ghostClass:"ghost",class:"draggable-content",disabled:s(ot),animation:200,handle:".drag-handle",onStart:z,onUpdate:B,onEnd:B},{default:i(()=>[(L(!0),X(St,null,_t(s(D),r=>(L(),M(at,{key:r.id,id:r.id,onEditorScriptFile:v,"show-hover":s(V),onOpenFile:o,onSetScript:q,onRunScript:y,onDeleteScript:h},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])])}}}),Xt=et(Ut,[["__scopeId","data-v-26935ea0"]]);export{Xt as default};
