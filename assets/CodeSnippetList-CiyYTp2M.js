import{_ as Ve}from"./CodeIcon-DWK99y1q.js";import{d as le,u as ie,i as o,k as ae,s as re,e as de,c as f,l as p,m as x,o as _,a as X,n as s,g as M,w as i,b as l,p as y,t as F,q as k,E as Ee,v as Le,y as Ie,_ as ue,z as Be,U as De,A as Te,B as Fe,S as ne,C as Ne,D as Re,F as $,G as Ue,bP as Ae,N as K,j as He,f as $e,H as Me,I as ze,J as Oe,K as Pe,L as qe,a8 as Ge,X as se,Q as We,T as je,bW as Je}from"./index-CqHkYROl.js";import{E as Ke}from"./el-empty-f7o6tlaN.js";/* empty css                        */import{E as Qe}from"./el-drawer-Czx17N6w.js";import{l as Xe}from"./vue-draggable-plus-DMFDdkcQ.js";const he={class:"content drag-handle"},Ye={class:"info"},Ze={class:"menu"},et=le({__name:"CodeSnippetListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editFile","openFile","delCodeSnippets","editInfo"],setup(h,{emit:b}){ie(v=>({"6e968de5":o(j),"2a05759c":o(z),"35a9e55c":o(N),"220eae84":o(S),"509a0236":o(O)}));const D=ae();re(D);const{appAsideBgColor:z,appBackground:S}=de(),V=h,O=f(()=>V.showHover?"4px":"0px"),N=f(()=>V.showHover?"all 0.5s":"none"),E=b,m=f(()=>p().mockCodeSnippetList.value.find(v=>v.id===V.id)),d=f(()=>p().mockCodeSnippetList.value.findIndex(v=>v.id===V.id)),g=x(!1),P=()=>{d.value!==void 0&&d.value!==-1&&E("delCodeSnippets",d.value)},q=()=>{d.value!==void 0&&d.value!==-1&&E("editFile",d.value)},G=()=>{d.value!==void 0&&d.value!==-1&&E("editInfo",d.value)},W=()=>{d.value!==void 0&&d.value!==-1&&E("openFile",d.value)},R=x(),j=f(()=>g.value?40+R.value.clientHeight+"px":"40px");return(v,t)=>{const w=Ee,J=Le,L=Ie,C=Ve;return _(),X("div",{class:"code-snippet-item",onClick:t[4]||(t[4]=r=>g.value=!o(g))},[s("div",he,[s("div",Ye,[o(g)?(_(),M(w,{key:1,class:"icon",size:"large"},{default:i(()=>t[6]||(t[6]=[s("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(_(),M(w,{key:0,class:"icon",size:"large"},{default:i(()=>t[5]||(t[5]=[s("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),l(J,{truncated:""},{default:i(()=>[y(F(o(m).name),1)]),_:1})]),s("div",Ze,[l(L,{class:"box-item",effect:"dark",content:"删除代码片段",placement:"bottom"},{default:i(()=>[l(w,{class:"icon",onClick:k(P,["stop"])},{default:i(()=>t[7]||(t[7]=[s("span",{"i-mdi-file-document-remove-outline":""},null,-1)])),_:1})]),_:1}),l(L,{class:"box-item",effect:"dark",content:"编辑代码片段",placement:"bottom"},{default:i(()=>[l(C,{class:"icon",onClick:k(q,["stop"])})]),_:1}),l(L,{class:"box-item",effect:"dark",content:"修改代码片段信息",placement:"bottom"},{default:i(()=>[l(w,{class:"icon",onClick:k(G,["stop"])},{default:i(()=>t[8]||(t[8]=[s("span",{"i-mdi-playlist-edit":""},null,-1)])),_:1})]),_:1}),l(L,{class:"box-item",effect:"dark",content:"打开代码片段",placement:"bottom"},{default:i(()=>[l(w,{class:"icon",onClick:k(W,["stop"])},{default:i(()=>t[9]||(t[9]=[s("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1})])]),s("div",{class:"details",ref_key:"detailsRef",ref:R},[t[10]||(t[10]=s("div",null,"代码片段ID：",-1)),s("div",{class:"text",onClick:t[0]||(t[0]=k(()=>{},["stop"]))},F(o(m).id),1),t[11]||(t[11]=s("div",null,"前缀：",-1)),s("div",{class:"text",onClick:t[1]||(t[1]=k(()=>{},["stop"]))},F(o(m).prefix),1),t[12]||(t[12]=s("div",null,"保存路径：",-1)),s("div",{class:"text",onClick:t[2]||(t[2]=k(()=>{},["stop"]))},F(o(m).filePath),1),t[13]||(t[13]=s("div",null,"代码片段描述(备注)：",-1)),s("div",{class:"description",onClick:t[3]||(t[3]=k(()=>{},["stop"]))},F(o(m).description),1)],512)])}}}),tt=ue(et,[["__scopeId","data-v-7d71038c"]]),ot={class:"code-snippet-list-div"},nt={class:"dialog-footer"},st={class:"dialog-footer"},lt={class:"header-right"},it={class:"list","h-full":""},Q="snippet-editor",at=le({__name:"CodeSnippetList",setup(h){ie(n=>({"75451aba":o(ke),fea40c28:o(xe),"0f55289a":o(te)}));const b=x(!1),D=x(""),z=ae(),S=Be("headerRef");re(z);const V=f(()=>p().mockCodeSnippetList.value.find(n=>n.id===D.value)?.name||""),O=x();let N=()=>{};const{saveDialog:E,saveConfig:m,showCopyBtn:d}=Je(),g=x(!0),{editorInit:P,disposeEditor:q,findEditor:G,setText:W,editorValue:R}=De(),j=()=>{g.value=!1},v=()=>{g.value=!0},t=x(!1),w=n=>{N=async()=>{{p().mockCodeSnippetList.value.splice(n,1),K({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),t.value=!1;return}},t.value=!0},J=/export \{\s?\};?/g,L=async n=>{b.value=!0,await Ge();const e=p().mockCodeSnippetList.value[n];D.value=e.id,G(Q)||await P(Q,!1,!1);const u=e.content;W(Q,`export {};
`+u?.trim()||"")},C=x(!1),r=Te({name:"",description:"",prefix:""});let Y=()=>{},Z="";const pe=async n=>{const e=p().mockCodeSnippetList.value[n];r.name=e.name,Z=e.name,r.description=e.description,r.prefix=e.prefix,Y=()=>{if(p().mockCodeSnippetList.value.find(B=>B.name===r.name)&&Z!==r.name){se.warning("已存在相同名称的代码片段，换个名字试试吧");return}const u=p().mockCodeSnippetList.value[n];u.name=r.name,u.description=r.description,u.prefix=r.prefix,C.value=!1,se.success("修改成功")},C.value=!0},ce=async n=>{const e=R.value.replace(J,""),c=p().mockCodeSnippetList.value.find(B=>B.id===D.value);if(!c){n();return}const u=c.content;e.trim()!==u?.trim()&&Ae.confirm("代码已经修改,是否保存?","提示",{confirmButtonText:"保存",cancelButtonText:"不保存",distinguishCancelAndClose:!0}).then(async()=>{{c.content=e,K({title:"提示",message:"保存成功",type:"success",position:"bottom-right"}),n();return}}).catch(n),n()},me=async n=>{{K({title:"提示",message:"playground环境无法打开代码片段文件",type:"warning",position:"bottom-right"});return}},fe=()=>{m.code="",m.name="操作记录",m.description="",m.prefix="",E.value=!0,d.value=!1},ve=async()=>{{const n=p().mockCodeSnippetList;n.value.push({id:We(),name:"操作记录"+n.value.length,description:"操作记录"+n.value.length,prefix:"test"+n.value.length,content:"",filePath:"playground"});return}},{trueSearch:ee,searchInfo:I,ingoreObserver:U}=He(),ge=f(()=>ee.value!==""),T=f({get:()=>{const n=ee.value;return n===""?p().mockCodeSnippetList.value:p().mockCodeSnippetList.value.filter(c=>c.name.toLowerCase().includes(n.toLowerCase())||c.description.toLowerCase().includes(n.toLowerCase())||c.prefix.toLowerCase().includes(n.toLowerCase()))},set:n=>{p().mockCodeSnippetList.value=n}}),{appAsideBgColor:Ce,appBackground:te}=de(),{isEditing:oe}=$e(),ke=f(()=>oe.value?Ce?.value:te?.value),xe=f(()=>oe.value?"0":"10px 10px 10px 0"),Se=n=>{n.forEach(e=>{U.value||(I.show=!e.isIntersecting)})};let A;Fe(()=>{q(),U.value=!0,I.show=!1,I.target=ne.None,A&&S.value&&A.unobserve(S.value)}),Ne(()=>{Re.closeSplashscreen(),A=new IntersectionObserver(Se,{}),S.value&&A.observe(S.value),I.target=ne.CodeSnippetList});const we=()=>{U.value&&(U.value=!1)};return(n,e)=>{const c=Qe,u=je,B=Me,H=ze,ye=Oe,_e=Ke,be=tt;return _(),X("div",{class:"container-root",onScroll:we},[l(c,{modelValue:o(b),"onUpdate:modelValue":e[0]||(e[0]=a=>$(b)?b.value=a:null),title:o(V),"before-close":ce,direction:"ltr",size:"80%",class:"orp-drawer"},{default:i(()=>e[10]||(e[10]=[s("div",{id:"snippet-editor","w-full":"","h-full":""},null,-1)])),_:1},8,["modelValue","title"]),s("div",ot,[l(B,{modelValue:o(t),"onUpdate:modelValue":e[2]||(e[2]=a=>$(t)?t.value=a:null),title:"删除代码片段"},{footer:i(()=>[s("span",nt,[l(u,{onClick:e[1]||(e[1]=a=>t.value=!1)},{default:i(()=>e[11]||(e[11]=[y("取消")])),_:1}),l(u,{type:"danger",onClick:o(N)},{default:i(()=>e[12]||(e[12]=[y("删除")])),_:1},8,["onClick"])])]),default:i(()=>[e[13]||(e[13]=s("div",null,"确定要删除该代码片段吗?",-1))]),_:1},8,["modelValue"]),l(B,{modelValue:o(C),"onUpdate:modelValue":e[7]||(e[7]=a=>$(C)?C.value=a:null),title:"编辑代码片段信息"},{footer:i(()=>[s("span",st,[l(u,{onClick:e[6]||(e[6]=a=>C.value=!1)},{default:i(()=>e[14]||(e[14]=[y("取消")])),_:1}),l(u,{type:"primary",onClick:o(Y)},{default:i(()=>e[15]||(e[15]=[y("保存")])),_:1},8,["onClick"])])]),default:i(()=>[e[16]||(e[16]=s("div",null,"代码片段名称:",-1)),l(H,{modelValue:o(r).name,"onUpdate:modelValue":e[3]||(e[3]=a=>o(r).name=a)},null,8,["modelValue"]),e[17]||(e[17]=s("div",null,"代码片段描述:",-1)),l(H,{modelValue:o(r).description,"onUpdate:modelValue":e[4]||(e[4]=a=>o(r).description=a)},null,8,["modelValue"]),e[18]||(e[18]=s("div",null,"代码片段前缀:",-1)),l(H,{modelValue:o(r).prefix,"onUpdate:modelValue":e[5]||(e[5]=a=>o(r).prefix=a)},null,8,["modelValue"])]),_:1},8,["modelValue"]),s("div",{class:"header",ref_key:"headerRef",ref:S},[e[21]||(e[21]=s("span",{style:{"font-size":"18px"}},"代码片段列表",-1)),s("div",lt,[l(H,{class:"input",modelValue:o(I).content,"onUpdate:modelValue":e[8]||(e[8]=a=>o(I).content=a),clearable:"",placeholder:"搜索代码片段:名称、备注、前缀"},null,8,["modelValue"]),l(ye,null,{default:i(()=>[l(u,{onClick:ve},{default:i(()=>e[19]||(e[19]=[y("导入")])),_:1}),l(u,{type:"primary",onClick:fe},{default:i(()=>e[20]||(e[20]=[y("新建")])),_:1})]),_:1})])],512),s("div",it,[o(T).length===0?(_(),M(_e,{key:0,description:"暂无代码片段","position-absolute":"","top-0":"","bottom-0":"","right-0":"","left-0":""})):Ue("",!0),l(o(Xe),{ref_key:"el",ref:O,modelValue:o(T),"onUpdate:modelValue":e[9]||(e[9]=a=>$(T)?T.value=a:null),ghostClass:"ghost",class:"draggable-content",disabled:o(ge),animation:200,handle:".drag-handle",onStart:j,onUpdate:v,onEnd:v},{default:i(()=>[(_(!0),X(Pe,null,qe(o(T),a=>(_(),M(be,{key:a.id,id:a.id,onEditFile:L,onEditInfo:pe,"show-hover":o(g),onOpenFile:me,onDelCodeSnippets:w},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])])],32)}}}),ft=ue(at,[["__scopeId","data-v-43d8acf0"]]);export{ft as default};
