import{_ as xe}from"./CodeIcon-b50yhWmz.js";import{d as ee,u as te,i as t,j as oe,s as ne,e as se,c,k as m,l as v,o as y,a as W,m as n,g as R,w as i,t as F,b as l,p as k,E as _e,v as Se,_ as le,O as ye,x as we,bw as Ve,y as be,z as Ee,A as N,B as Le,bS as Ie,G as q,f as Be,C as De,n as I,F as Fe,D as Ne,a8 as Te,aa as h,K as Ue,L as Ae,M as Me,N as Re,X as $e}from"./index-D_dbWzvW.js";import{E as He}from"./el-empty-NomWsnoc.js";import{E as ze}from"./el-affix-CJpDk4lD.js";/* empty css                        */import{E as Oe}from"./el-drawer-BqqJ3Bnl.js";import{l as Pe}from"./vue-draggable-plus-D0MLr61c.js";const Ge={class:"content drag-handle"},je={class:"info"},qe={class:"menu"},Ke=ee({__name:"CodeSnippetListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editFile","openFile","delCodeSnippets","editInfo"],setup(X,{emit:w}){te(p=>({"3fd7903e":t(A),"0a15fa3a":t($),"51da1863":t(z),"3e3ee18b":t(H),c4c7c462:t(T)}));const B=oe();ne(B);const{appAsideBgColor:$,appBackground:H}=se(),V=X,T=c(()=>V.showHover?"4px":"0px"),z=c(()=>V.showHover?"all 0.5s":"none"),f=w,x=c(()=>m().mockCodeSnippetList.value.find(p=>p.id===V.id)),d=c(()=>m().mockCodeSnippetList.value.findIndex(p=>p.id===V.id)),b=v(!1),O=()=>{d.value!==void 0&&d.value!==-1&&f("delCodeSnippets",d.value)},P=()=>{d.value!==void 0&&d.value!==-1&&f("editFile",d.value)},G=()=>{d.value!==void 0&&d.value!==-1&&f("editInfo",d.value)},j=()=>{d.value!==void 0&&d.value!==-1&&f("openFile",d.value)},U=v(),A=c(()=>b.value?40+U.value.clientHeight+"px":"40px");return(p,o)=>{const _=_e,E=Se,g=xe;return y(),W("div",{class:"code-snippet-item",onClick:o[4]||(o[4]=r=>b.value=!t(b))},[n("div",Ge,[n("div",je,[t(b)?(y(),R(_,{key:1,class:"icon",size:"large"},{default:i(()=>o[6]||(o[6]=[n("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(y(),R(_,{key:0,class:"icon",size:"large"},{default:i(()=>o[5]||(o[5]=[n("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),n("span",null,F(t(x).name),1)]),n("div",qe,[l(E,{class:"box-item",effect:"dark",content:"删除代码片段",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:k(O,["stop"])},{default:i(()=>o[7]||(o[7]=[n("span",{"i-mdi-file-document-remove-outline":""},null,-1)])),_:1})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"编辑代码片段",placement:"bottom"},{default:i(()=>[l(g,{class:"icon",onClick:k(P,["stop"])})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"修改代码片段信息",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:k(G,["stop"])},{default:i(()=>o[8]||(o[8]=[n("span",{"i-mdi-playlist-edit":""},null,-1)])),_:1})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"打开代码片段",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:k(j,["stop"])},{default:i(()=>o[9]||(o[9]=[n("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1})])]),n("div",{class:"details",ref_key:"detailsRef",ref:U},[o[10]||(o[10]=n("div",null,"代码片段ID：",-1)),n("div",{class:"text",onClick:o[0]||(o[0]=k(()=>{},["stop"]))},F(t(x).id),1),o[11]||(o[11]=n("div",null,"前缀：",-1)),n("div",{class:"text",onClick:o[1]||(o[1]=k(()=>{},["stop"]))},F(t(x).prefix),1),o[12]||(o[12]=n("div",null,"保存路径：",-1)),n("div",{class:"text",onClick:o[2]||(o[2]=k(()=>{},["stop"]))},F(t(x).filePath),1),o[13]||(o[13]=n("div",null,"代码片段描述(备注)：",-1)),n("div",{class:"description",onClick:o[3]||(o[3]=k(()=>{},["stop"]))},F(t(x).description),1)],512)])}}}),We=le(Ke,[["__scopeId","data-v-180c297d"]]),Xe={class:"container-root"},Je={class:"code-snippet-list-div"},Qe={class:"dialog-footer"},Ye={class:"dialog-footer"},Ze={class:"header"},he={class:"header-right"},et={class:"list","h-full":""},K="snippet-editor",tt=ee({__name:"CodeSnippetList",setup(X){te(s=>({"8f9a8652":t(ce),e8b065c0:t(fe),"5bc97c34":t(Y)}));const w=v(!1),B=v(""),$=oe();ne($);const H=c(()=>m().mockCodeSnippetList.value.find(s=>s.id===B.value)?.name||""),V=v();let T=()=>{};const{saveDialog:z,saveConfig:f,showCopyBtn:x}=$e(),d=v(!0),{editorInit:b,disposeEditor:O,findEditor:P,setText:G,editorValue:j}=ye(),U=()=>{d.value=!1},A=()=>{d.value=!0},p=v(!1),o=s=>{T=async()=>{{m().mockCodeSnippetList.value.splice(s,1),q({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),p.value=!1;return}},p.value=!0},_=/export \{\s?\};?/g,E=async s=>{w.value=!0,await Te();const e=m().mockCodeSnippetList.value[s];B.value=e.id,P(K)||await b(K,!1,!1);const u=e.content;G(K,`export {};
`+u?.trim()||"")},g=v(!1),r=we({name:"",description:"",prefix:""});let J=()=>{},Q="";const ie=async s=>{const e=m().mockCodeSnippetList.value[s];r.name=e.name,Q=e.name,r.description=e.description,r.prefix=e.prefix,J=()=>{if(m().mockCodeSnippetList.value.find(L=>L.name===r.name)&&Q!==r.name){h.warning("已存在相同名称的代码片段，换个名字试试吧");return}const u=m().mockCodeSnippetList.value[s];u.name=r.name,u.description=r.description,u.prefix=r.prefix,g.value=!1,h.success("修改成功")},g.value=!0},ae=async s=>{const e=j.value.replace(_,""),S=m().mockCodeSnippetList.value.find(L=>L.id===B.value);if(!S){s();return}const u=S.content;e.trim()!==u?.trim()&&Ie.confirm("代码已经修改,是否保存?","提示",{confirmButtonText:"保存",cancelButtonText:"不保存",distinguishCancelAndClose:!0}).then(async()=>{{S.content=e,q({title:"提示",message:"保存成功",type:"success",position:"bottom-right"}),s();return}}).catch(s),s()},de=async s=>{{q({title:"提示",message:"playground环境无法打开代码片段文件",type:"warning",position:"bottom-right"});return}},re=()=>{f.code="",f.name="操作记录",f.description="",f.prefix="",z.value=!0,x.value=!1},ue=async()=>{{const s=m().mockCodeSnippetList;s.value.push({id:Ue(),name:"操作记录"+s.value.length,description:"操作记录"+s.value.length,prefix:"test"+s.value.length,content:"",filePath:"playground"});return}},C=v(""),pe=c(()=>C.value!==""),D=c({get:()=>C.value===""?m().mockCodeSnippetList.value:m().mockCodeSnippetList.value.filter(e=>e.name.toLowerCase().includes(C.value.toLowerCase())||e.description.toLowerCase().includes(C.value.toLowerCase())||e.prefix.toLowerCase().includes(C.value.toLowerCase())),set:s=>{m().mockCodeSnippetList.value=s}}),{appAsideBgColor:me,appBackground:Y}=se(),{isEditing:Z}=Be(),ce=c(()=>Z.value?me?.value:Y?.value),fe=c(()=>Z.value?"0":"10px 10px 10px 0");return Ve(()=>{O()}),be(()=>{Ee.closeSplashscreen()}),(s,e)=>{const S=Oe,u=Ae,L=De,M=Me,ve=Re,ge=ze,Ce=He,ke=We;return y(),W("div",Xe,[l(S,{modelValue:t(w),"onUpdate:modelValue":e[0]||(e[0]=a=>N(w)?w.value=a:null),title:t(H),"before-close":ae,direction:"ltr",size:"80%",class:"orp-drawer"},{default:i(()=>e[10]||(e[10]=[n("div",{id:"snippet-editor","w-full":"","h-full":""},null,-1)])),_:1},8,["modelValue","title"]),n("div",Je,[l(L,{modelValue:t(p),"onUpdate:modelValue":e[2]||(e[2]=a=>N(p)?p.value=a:null),title:"删除代码片段"},{footer:i(()=>[n("span",Qe,[l(u,{onClick:e[1]||(e[1]=a=>p.value=!1)},{default:i(()=>e[11]||(e[11]=[I("取消")])),_:1}),l(u,{type:"danger",onClick:t(T)},{default:i(()=>e[12]||(e[12]=[I("删除")])),_:1},8,["onClick"])])]),default:i(()=>[e[13]||(e[13]=n("div",null,"确定要删除该代码片段吗?",-1))]),_:1},8,["modelValue"]),l(L,{modelValue:t(g),"onUpdate:modelValue":e[7]||(e[7]=a=>N(g)?g.value=a:null),title:"编辑代码片段信息"},{footer:i(()=>[n("span",Ye,[l(u,{onClick:e[6]||(e[6]=a=>g.value=!1)},{default:i(()=>e[14]||(e[14]=[I("取消")])),_:1}),l(u,{type:"primary",onClick:t(J)},{default:i(()=>e[15]||(e[15]=[I("保存")])),_:1},8,["onClick"])])]),default:i(()=>[e[16]||(e[16]=n("div",null,"代码片段名称:",-1)),l(M,{modelValue:t(r).name,"onUpdate:modelValue":e[3]||(e[3]=a=>t(r).name=a)},null,8,["modelValue"]),e[17]||(e[17]=n("div",null,"代码片段描述:",-1)),l(M,{modelValue:t(r).description,"onUpdate:modelValue":e[4]||(e[4]=a=>t(r).description=a)},null,8,["modelValue"]),e[18]||(e[18]=n("div",null,"代码片段前缀:",-1)),l(M,{modelValue:t(r).prefix,"onUpdate:modelValue":e[5]||(e[5]=a=>t(r).prefix=a)},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(ge,{target:".code-snippet-list-div",offset:40},{default:i(()=>[n("div",Ze,[e[21]||(e[21]=n("span",{style:{"font-size":"18px"}},"代码片段列表",-1)),n("div",he,[l(M,{class:"input",modelValue:t(C),"onUpdate:modelValue":e[8]||(e[8]=a=>N(C)?C.value=a:null),clearable:"",placeholder:"搜索代码片段:名称、备注、前缀"},null,8,["modelValue"]),l(ve,null,{default:i(()=>[l(u,{onClick:ue},{default:i(()=>e[19]||(e[19]=[I("导入")])),_:1}),l(u,{type:"primary",onClick:re},{default:i(()=>e[20]||(e[20]=[I("新建")])),_:1})]),_:1})])])]),_:1}),n("div",et,[t(D).length===0?(y(),R(Ce,{key:0,description:"暂无代码片段","position-absolute":"","top-0":"","bottom-0":"","right-0":"","left-0":""})):Le("",!0),l(t(Pe),{ref_key:"el",ref:V,modelValue:t(D),"onUpdate:modelValue":e[9]||(e[9]=a=>N(D)?D.value=a:null),ghostClass:"ghost",class:"draggable-content",disabled:t(pe),animation:200,handle:".drag-handle",onStart:U,onUpdate:A,onEnd:A},{default:i(()=>[(y(!0),W(Fe,null,Ne(t(D),a=>(y(),R(ke,{key:a.id,id:a.id,onEditFile:E,onEditInfo:ie,"show-hover":t(d),onOpenFile:de,onDelCodeSnippets:o},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])])])}}}),rt=le(tt,[["__scopeId","data-v-2897ba3c"]]);export{rt as default};
