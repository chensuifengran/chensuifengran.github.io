import{d as te,u as oe,i as e,e as ne,c as V,j as xe,l as v,A as ee,a8 as re,o as a,a as u,m as l,g as I,w as s,t as S,b as n,p as N,D as T,n as P,ad as ce,M as ue,bQ as Te,ab as Se,E as le,R as ae,v as Ve,_ as se,C as pe,bR as Ie,bS as Ae,bT as Ee,N as Me,H as me,bU as fe,a3 as Le,s as Be,B as Oe,bV as ze,a9 as de,b8 as He,aa as De,F as Ne,J as Z,K as X,am as $e,ay as Ue,az as Pe,Z as Re,Y as Fe,b3 as We}from"./index-BcWmzzsU.js";import{E as qe}from"./el-infinite-scroll-CSD4JeoK.js";import{E as je}from"./el-drawer-Bk0f5qgN.js";import{E as ve}from"./el-empty-CSp4XbQq.js";import{d as Ge,E as Ke,a as Je,_ as Qe}from"./dataStructure-YyTlI5cE.js";import"./el-checkbox-CSBpyGRp.js";import{l as Ye}from"./vue-draggable-plus-Cpz5P9Bf.js";import{L as Ze}from"./Loading-B0MWReAm.js";import"./isArrayLikeObject-BFwMTvQV.js";/* empty css                        */import"./index-CISRGvoF.js";const Xe={class:"api-header drag-handle"},et={class:"info"},tt={key:0,class:"api-details"},ot={class:"api-details-item"},nt={key:0,class:"api-details-item"},lt={key:0},at={key:1},st={key:0},it={key:1},ut={class:"api-details-item"},dt={class:"example-title"},rt=te({__name:"ApiDocumentItem",props:{model:{type:Object},showHover:{type:Boolean,default:!0}},setup(p){oe(i=>({"1c8ed338":e(x),"309a0451":e(H),"79dae7ae":e(b),"44353b29":e(U),"4da0856e":e($),"8aeff3b2":e(F),"550a18a0":e(A)}));const{appAsideBgColor:b,appBackground:H}=ne(),k=p,$=V(()=>k.showHover?"4px":"0px"),U=V(()=>k.showHover?"all 0.5s":"none"),f=xe(),g=V(()=>{const i=k.model?.dialog;return{...i,args:i?.args?.map(t=>(t.componentType==="select"&&t.options&&typeof t.options=="function"&&(t.options=t.options(f)),{...t}))}}),L=V(()=>g.value?.title||g.value?.targetMethodName),{invokeDynamicDialog:_}=ce(),d=v(),C=v(!1),x=v("40px"),A=v("hidden"),B=()=>{const i=!C.value;if(i&&!k.model?.document){ue.closeAll(),ue({title:"该API暂无使用文档",type:"warning",position:"bottom-right"});return}if(i){const t=setTimeout(async()=>{clearTimeout(t),A.value="auto",await R()})}else A.value="hidden";C.value=i},w=v("");ee(()=>{const i=k.model?.document?.example?.code;i&&(w.value=i)});const G=()=>{if(w.value.length){const i=g.value?.targetMethodName,t=Te().find(y=>y.name===i);t?t.testModule?.document?.example?.code&&(t.testModule.document.example.code=w.value):console.error(`重置示例失败：未找到${i}的测试模块`)}},R=async()=>{const i=document.body.clientHeight;if(C.value){await Se();const t=d.value?.clientHeight||0,y=Math.min(t?t+22:0,420+(i-661>0?(i-661)/2:0));F.value=y+"px",x.value=40+y+"px"}else x.value="40px"},F=v("420px");re(async()=>{k.model?.document?.example?.code,await R()});const K=V(()=>Ge.genTreeArrNodeId(k.model?.document?.params||[]));return(i,t)=>{const y=le,J=ae,O=Ve,h=Ke,D=Je,W=Qe,E=ve;return a(),u("div",{class:"api-doc-item",onClick:B},[l("div",Xe,[l("div",et,[e(C)?(a(),I(y,{key:1,class:"icon"},{default:s(()=>t[6]||(t[6]=[l("span",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(a(),I(y,{key:0,class:"icon"},{default:s(()=>t[5]||(t[5]=[l("span",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),l("span",null,"["+S(e(g)?.targetMethodName)+"]"+S(e(L)),1)]),n(O,{effect:"dark",content:"测试调用",placement:"left"},{default:s(()=>[n(J,{size:"small",type:"primary",circle:"",onClick:t[0]||(t[0]=N(M=>e(_)(e(g)?.targetMethodName,e(g)?.targetMethodName,e(g)?.content,"test"),["stop"]))},{default:s(()=>[n(y,{size:"large"},{default:s(()=>t[7]||(t[7]=[l("span",{"i-mdi-bug-play":""},null,-1)])),_:1})]),_:1})]),_:1})]),e(C)?(a(),u("div",tt,[p.model?.document?(a(),u("div",{key:0,class:"content",ref_key:"detailsContentRef",ref:d},[l("div",ot,[t[8]||(t[8]=l("span",null,"方法名：",-1)),l("span",null,S(e(g)?.targetMethodName),1)]),p.model.document.howToUse?(a(),u("div",nt,[t[9]||(t[9]=l("span",null,"方法描述：",-1)),l("span",null,S(p.model.document.howToUse),1)])):T("",!0),p.model.document.params?(a(),u("div",{key:1,class:"api-details-item",onClick:t[1]||(t[1]=N(()=>{},["stop"]))},[t[12]||(t[12]=l("span",null,"参数：",-1)),n(D,{"default-expand-all":"",data:e(K),"table-layout":"auto","row-key":"id"},{default:s(()=>[n(h,{prop:"name",label:"参数名"}),n(h,{prop:"required",label:"必填"},{default:s(M=>[M.row.required?(a(),u("span",lt,"是")):(a(),u("span",at,"否"))]),_:1}),n(h,{prop:"instructions",label:"说明",width:"240"}),n(h,{prop:"type",label:"类型"},{default:s(M=>[typeof M.row.type=="string"?(a(),u("span",st,S(M.row.type),1)):(a(),u("span",it,[t[11]||(t[11]=P("enum")),n(O,{effect:"dark",content:M.row.type?.join(",")||"",placement:"top-start"},{default:s(()=>[n(y,null,{default:s(()=>t[10]||(t[10]=[l("span",{"i-mdi-information-variant":""},null,-1)])),_:1})]),_:2},1032,["content"])]))]),_:1}),n(h,{prop:"default",label:"默认值"})]),_:1},8,["data"])])):T("",!0),l("div",ut,[t[13]||(t[13]=l("span",null,"返回值：",-1)),l("span",null,S(p.model.document.returnValue.instructions||""),1),p.model.document.returnValue.type?(a(),I(W,{key:0,"raw-code":p.model.document.returnValue.type,"show-copy":!1,onClick:t[2]||(t[2]=N(()=>{},["stop"]))},null,8,["raw-code"])):T("",!0)]),p.model.document.example?(a(),u("div",{key:2,class:"api-details-item",onClick:t[4]||(t[4]=N(()=>{},["stop"]))},[l("span",dt,[p.model.document.example.code!==e(w)?(a(),I(O,{key:0,effect:"dark",content:"恢复默认示例代码",placement:"top-start"},{default:s(()=>[n(y,{class:"refreshCode",onClick:N(G,["stop"])},{default:s(()=>t[14]||(t[14]=[l("span",{"i-mdi-file-sync-outline":""},null,-1)])),_:1})]),_:1})):T("",!0),t[15]||(t[15]=P("示例："))]),l("span",null,S(p.model.document.example.title),1),n(W,{"raw-code":p.model.document.example.code,onClick:t[3]||(t[3]=N(()=>{},["stop"]))},null,8,["raw-code"])])):T("",!0)],512)):(a(),I(E,{key:1,description:"该API暂无使用文档"}))])):T("",!0)])}}}),ct=se(rt,[["__scopeId","data-v-a92e5596"]]),pt={class:"header-r"},mt=te({__name:"ATHeader",props:{openOutput:{type:Function,required:!0},changeSearchValue:{type:Function,required:!0}},setup(p){oe(_=>({"63ba8aaa":e(U),21471403:e($)}));const b=v(""),H=()=>{Ie().hide();const _=Ae().find(d=>d.label==="main");_&&_.setFocus()},{isMainWindow:k}=fe(),{appAsideBgColor:$,appBackground:U}=ne();let f=0,g;const L=()=>{++f>3&&Ee.confirm("是否前往首页","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{k&&(k.value=!0),Me.push("/")}),g&&clearTimeout(g),g=setTimeout(()=>{f=0},500)};return(_,d)=>{const C=me,x=le,A=ae;return a(),u("div",null,[l("div",{"data-tauri-drag-region":"",style:{width:"25%",cursor:"move"}},[l("span",{onClick:L},"调试")]),l("div",pt,[d[4]||(d[4]=l("div",{"data-tauri-drag-region":"",style:{cursor:"move"},class:"move"},null,-1)),n(C,{onInput:d[0]||(d[0]=B=>p.changeSearchValue(e(b))),class:"input",modelValue:e(b),"onUpdate:modelValue":d[1]||(d[1]=B=>pe(b)?b.value=B:null),clearable:"",placeholder:"可输入API的关键字对API进行筛选"},null,8,["modelValue"]),n(A,{class:"circle-btn",type:"info",circle:"",onClick:p.openOutput},{default:s(()=>[n(x,null,{default:s(()=>d[2]||(d[2]=[l("span",{"i-solar-notification-unread-linear":""},null,-1)])),_:1})]),_:1},8,["onClick"]),n(A,{class:"circle-btn",type:"info",circle:"",onClick:H},{default:s(()=>[n(x,null,{default:s(()=>d[3]||(d[3]=[l("span",{"i-mdi-minus":""},null,-1)])),_:1})]),_:1})])])}}}),ft=se(mt,[["__scopeId","data-v-933697a4"]]),vt={class:"remd"},gt={key:0,class:"api-test-bar","data-tauri-drag-region":"",style:{cursor:"move"}},_t={key:1,class:"end"},wt={class:"loading-box"},yt=["id"],ht={key:1,class:"empty-show"},kt=te({__name:"APITest",setup(p){oe(m=>({"3117b20e":e(B),"4af8d8e6":e(A)}));const b=v(!0),H=v(),{builtInApiTestModules:k,moveBuiltInApiIndex:$,setTestModuleCtx:U}=ce(),{info:f,windowInnerWidth:g}=Ne(),L=Le(),{app:_}=Be(L),d=v(!0),C=v(!1),{isMainWindow:x}=fe(),{appBackground:A}=ne(),B=v("10px"),w=v(""),G=V(()=>w.value!==""),R=()=>{b.value=!1},F=()=>{b.value=!0},K=m=>{const{oldIndex:o,newIndex:r}=m;o!==void 0&&r!==void 0&&$(o,r),F()},i=v([]),t=()=>{i.value=[]},y=V(()=>f.showContentType==="apiTest"&&g.value<820),J=V(()=>+_.value.modulesSetting.drawerSize.replace("%","")*3-40);let O=null;re(()=>{const m=f.apiTest.searchValue;O&&clearTimeout(O),O=setTimeout(()=>{w.value!==m&&(w.value=m)},500)});const h=v(0);let D=0;ee(()=>{const m=H.value;h.value=Math.ceil(m.offsetHeight/43)+1;const o=setTimeout(()=>{d.value=!1,clearTimeout(o)},500);L.isInited||L.init(),Oe.closeSplashscreen()});const W=async()=>{h.value<D?h.value=Math.min(h.value+5,D):h.value===D&&(C.value=!0)},E=V({get:()=>{const m=[...k.value.filter(o=>w.value?o.dialog.targetMethodName?.toLocaleLowerCase()?.includes(w.value?.toLocaleLowerCase())||o.dialog.title?.toLocaleLowerCase()?.includes(w.value?.toLocaleLowerCase())||o.dialog.content?.toLocaleLowerCase()?.includes(w.value?.toLocaleLowerCase())||o.document.howToUse?.toLocaleLowerCase()?.includes(w.value?.toLocaleLowerCase())||o.document.searchKeys?.some(r=>r?.toLocaleLowerCase().includes(w.value?.toLocaleLowerCase())):!0)].sort((o,r)=>r.weight-o.weight);return D=m.length,m.slice(0,h.value)},set:m=>{h.value=m.length}});ze(()=>{x.value||(B.value="0")});const M=(m,o="")=>{_.value.modulesSetting.autoOpenOutput&&(f.apiTest.openOutput=!0);const r=new Date,Q=r.getHours()<10?"0"+r.getHours():r.getHours(),q=r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),j=r.getSeconds()<10?"0"+r.getSeconds():r.getSeconds(),Y=`[${Q}:${q}:${j}] `;i.value.unshift(Y+o+"：	"+m)};return ee(()=>{U({showDetails:M})}),(m,o)=>{const r=ft,Q=me,q=le,j=ae,Y=ct,ie=ve,ge=Ue,_e=Pe,we=Re,ye=Fe,he=We,ke=je,be=qe;return a(),u("div",vt,[e(x)?T("",!0):(a(),I(r,{key:0,class:"alone-page-header",openOutput:()=>e(f).apiTest.openOutput=!0,changeSearchValue:c=>e(f).apiTest.searchValue=c},null,8,["openOutput","changeSearchValue"])),de((a(),u("div",{class:"page-content",ref_key:"pageContentRef",ref:H,"infinite-scroll-distance":40,"infinite-scroll-immediate":!1},[n(He,{"enter-active-class":"animate__animated animate__fadeInDown","leave-active-class":"animate__animated animate__fadeOutUp"},{default:s(()=>[e(y)&&e(x)?(a(),u("div",gt,[n(Q,{class:"search-ipt",modelValue:e(f).apiTest.searchValue,"onUpdate:modelValue":o[0]||(o[0]=c=>e(f).apiTest.searchValue=c),clearable:"",placeholder:"可输入API的关键字对API进行筛选"},null,8,["modelValue"]),n(j,{class:"output-btn",onClick:o[1]||(o[1]=c=>e(f).apiTest.openOutput=!0)},{default:s(()=>[n(q,null,{default:s(()=>o[6]||(o[6]=[l("span",{"i-solar-notification-unread-linear":""},null,-1)])),_:1})]),_:1})])):T("",!0)]),_:1}),n(e(Ye),{ref:"el",modelValue:e(E),"onUpdate:modelValue":o[2]||(o[2]=c=>pe(E)?E.value=c:null),animation:200,ghostClass:"ghost",class:"draggable-content",handle:".drag-handle",disabled:e(G),onUpdate:K,onStart:R},{default:s(()=>[(a(!0),u(Z,null,X(e(E),c=>(a(),I(Y,{key:c?.dialog?.targetMethodName||c?.dialog?.title,model:c,"show-hover":e(b)},null,8,["model","show-hover"]))),128))]),_:1},8,["modelValue","disabled"]),e(E).length?T("",!0):(a(),I(ie,{key:0,description:"没有找到相应的API"})),e(C)?(a(),u("div",_t," ------到底了，共"+S(e(E).length)+"个API------ ",1)):T("",!0),de(l("div",wt,[n(Ze),o[7]||(o[7]=P("加载中... "))],512),[[De,e(d)]])])),[[be,W]]),n(ke,{modelValue:e(f).apiTest.openOutput,"onUpdate:modelValue":o[5]||(o[5]=c=>e(f).apiTest.openOutput=c),title:"",direction:"btt",size:e(_).modulesSetting.drawerSize,class:"drawer-output"},{header:s(({titleId:c,titleClass:Ce})=>[l("h4",{id:c,class:$e(Ce)},"API测试-输出结果",10,yt),n(_e,{modelValue:e(_).modulesSetting.drawerSize,"onUpdate:modelValue":o[3]||(o[3]=z=>e(_).modulesSetting.drawerSize=z),placeholder:"大小",size:"small",class:"options select"},{default:s(()=>[(a(),u(Z,null,X(8,z=>n(ge,{key:z,label:20+z*10+"%",value:20+z*10+"%"},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n(we,{class:"options",modelValue:e(_).modulesSetting.autoOpenOutput,"onUpdate:modelValue":o[4]||(o[4]=z=>e(_).modulesSetting.autoOpenOutput=z),"inline-prompt":"",style:{"--el-switch-on-color":"var(--el-color-primary)","--el-switch-off-color":"#ccc"},"active-text":"自动显示","inactive-text":"手动显示"},null,8,["modelValue"]),n(j,{class:"options",size:"small",onClick:t},{default:s(()=>[n(q,null,{default:s(()=>o[8]||(o[8]=[l("span",{"i-mdi-playlist-remove":""},null,-1)])),_:1}),o[9]||(o[9]=P("清空输出 "))]),_:1})]),default:s(()=>[e(i).length?(a(),I(he,{key:0,class:"output"},{default:s(()=>[(a(!0),u(Z,null,X(e(i),c=>(a(),u("div",{key:c,class:"output-text"},[n(ye,{size:"small"},{default:s(()=>[P(S(c),1)]),_:2},1024)]))),128))]),_:1})):(a(),u("div",ht,[n(ie,{description:"暂无输出","image-size":e(J),style:{"margin-top":"-40px"}},null,8,["image-size"])]))]),_:1},8,["modelValue","size"])])}}}),Bt=se(kt,[["__scopeId","data-v-77d85631"]]);export{Bt as default};
