import{_ as ye}from"./CodeIcon-C0UkHQq7.js";import{d as se,u as le,i as o,j as ie,s as ae,e as de,c as f,k as p,l as k,o as w,a as W,m as s,g as M,w as i,t as F,b as l,p as C,E as _e,v as Ve,_ as re,x as Ee,T as Ie,y as Le,z as Be,S as oe,A as De,B as Te,C as H,D as Fe,bT as Re,M as J,F as Ne,f as Ue,G as Ae,H as He,I as Me,n as B,J as $e,K as ze,ab as Oe,ac as ne,P as Pe,R as Ge,a0 as he}from"./index-BcWmzzsU.js";import{E as je}from"./el-empty-CSp4XbQq.js";/* empty css                        */import{E as qe}from"./el-drawer-Bk0f5qgN.js";import{l as Je}from"./vue-draggable-plus-Cpz5P9Bf.js";const Ke={class:"content drag-handle"},We={class:"info"},Qe={class:"menu"},Xe=se({__name:"CodeSnippetListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editFile","openFile","delCodeSnippets","editInfo"],setup(Q,{emit:y}){le(v=>({"187eda9d":o(j),"5b685be4":o($),f4bc84b8:o(R),"720686cc":o(x),"4b93e4ee":o(z)}));const D=ie();ae(D);const{appAsideBgColor:$,appBackground:x}=de(),_=Q,z=f(()=>_.showHover?"4px":"0px"),R=f(()=>_.showHover?"all 0.5s":"none"),V=y,c=f(()=>p().mockCodeSnippetList.value.find(v=>v.id===_.id)),d=f(()=>p().mockCodeSnippetList.value.findIndex(v=>v.id===_.id)),g=k(!1),O=()=>{d.value!==void 0&&d.value!==-1&&V("delCodeSnippets",d.value)},P=()=>{d.value!==void 0&&d.value!==-1&&V("editFile",d.value)},G=()=>{d.value!==void 0&&d.value!==-1&&V("editInfo",d.value)},h=()=>{d.value!==void 0&&d.value!==-1&&V("openFile",d.value)},N=k(),j=f(()=>g.value?40+N.value.clientHeight+"px":"40px");return(v,t)=>{const b=_e,E=Ve,q=ye;return w(),W("div",{class:"code-snippet-item",onClick:t[4]||(t[4]=S=>g.value=!o(g))},[s("div",Ke,[s("div",We,[o(g)?(w(),M(b,{key:1,class:"icon",size:"large"},{default:i(()=>t[6]||(t[6]=[s("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(w(),M(b,{key:0,class:"icon",size:"large"},{default:i(()=>t[5]||(t[5]=[s("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),s("span",null,F(o(c).name),1)]),s("div",Qe,[l(E,{class:"box-item",effect:"dark",content:"删除代码片段",placement:"bottom"},{default:i(()=>[l(b,{class:"icon",onClick:C(O,["stop"])},{default:i(()=>t[7]||(t[7]=[s("span",{"i-mdi-file-document-remove-outline":""},null,-1)])),_:1})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"编辑代码片段",placement:"bottom"},{default:i(()=>[l(q,{class:"icon",onClick:C(P,["stop"])})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"修改代码片段信息",placement:"bottom"},{default:i(()=>[l(b,{class:"icon",onClick:C(G,["stop"])},{default:i(()=>t[8]||(t[8]=[s("span",{"i-mdi-playlist-edit":""},null,-1)])),_:1})]),_:1}),l(E,{class:"box-item",effect:"dark",content:"打开代码片段",placement:"bottom"},{default:i(()=>[l(b,{class:"icon",onClick:C(h,["stop"])},{default:i(()=>t[9]||(t[9]=[s("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1})])]),s("div",{class:"details",ref_key:"detailsRef",ref:N},[t[10]||(t[10]=s("div",null,"代码片段ID：",-1)),s("div",{class:"text",onClick:t[0]||(t[0]=C(()=>{},["stop"]))},F(o(c).id),1),t[11]||(t[11]=s("div",null,"前缀：",-1)),s("div",{class:"text",onClick:t[1]||(t[1]=C(()=>{},["stop"]))},F(o(c).prefix),1),t[12]||(t[12]=s("div",null,"保存路径：",-1)),s("div",{class:"text",onClick:t[2]||(t[2]=C(()=>{},["stop"]))},F(o(c).filePath),1),t[13]||(t[13]=s("div",null,"代码片段描述(备注)：",-1)),s("div",{class:"description",onClick:t[3]||(t[3]=C(()=>{},["stop"]))},F(o(c).description),1)],512)])}}}),Ye=re(Xe,[["__scopeId","data-v-ee8b609b"]]),Ze={class:"container-root"},et={class:"code-snippet-list-div"},tt={class:"dialog-footer"},ot={class:"dialog-footer"},nt={class:"header-right"},st={class:"list","h-full":""},K="snippet-editor",lt=se({__name:"CodeSnippetList",setup(Q){le(n=>({"2788758c":o(Ce),"7bd3bf43":o(ke),"39423aa3":o(ee)}));const y=k(!1),D=k(""),$=ie(),x=Ee("headerRef");ae($);const _=f(()=>p().mockCodeSnippetList.value.find(n=>n.id===D.value)?.name||""),z=k();let R=()=>{};const{saveDialog:V,saveConfig:c,showCopyBtn:d}=he(),g=k(!0),{editorInit:O,disposeEditor:P,findEditor:G,setText:h,editorValue:N}=Ie(),j=()=>{g.value=!1},v=()=>{g.value=!0},t=k(!1),b=n=>{R=async()=>{{p().mockCodeSnippetList.value.splice(n,1),J({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),t.value=!1;return}},t.value=!0},E=/export \{\s?\};?/g,q=async n=>{y.value=!0,await Oe();const e=p().mockCodeSnippetList.value[n];D.value=e.id,G(K)||await O(K,!1,!1);const u=e.content;h(K,`export {};
`+u?.trim()||"")},S=k(!1),r=Le({name:"",description:"",prefix:""});let X=()=>{},Y="";const ue=async n=>{const e=p().mockCodeSnippetList.value[n];r.name=e.name,Y=e.name,r.description=e.description,r.prefix=e.prefix,X=()=>{if(p().mockCodeSnippetList.value.find(L=>L.name===r.name)&&Y!==r.name){ne.warning("已存在相同名称的代码片段，换个名字试试吧");return}const u=p().mockCodeSnippetList.value[n];u.name=r.name,u.description=r.description,u.prefix=r.prefix,S.value=!1,ne.success("修改成功")},S.value=!0},pe=async n=>{const e=N.value.replace(E,""),m=p().mockCodeSnippetList.value.find(L=>L.id===D.value);if(!m){n();return}const u=m.content;e.trim()!==u?.trim()&&Re.confirm("代码已经修改,是否保存?","提示",{confirmButtonText:"保存",cancelButtonText:"不保存",distinguishCancelAndClose:!0}).then(async()=>{{m.content=e,J({title:"提示",message:"保存成功",type:"success",position:"bottom-right"}),n();return}}).catch(n),n()},me=async n=>{{J({title:"提示",message:"playground环境无法打开代码片段文件",type:"warning",position:"bottom-right"});return}},ce=()=>{c.code="",c.name="操作记录",c.description="",c.prefix="",V.value=!0,d.value=!1},fe=async()=>{{const n=p().mockCodeSnippetList;n.value.push({id:Pe(),name:"操作记录"+n.value.length,description:"操作记录"+n.value.length,prefix:"test"+n.value.length,content:"",filePath:"playground"});return}},{trueSearch:Z,searchInfo:I}=Ne(),ve=f(()=>Z.value!==""),T=f({get:()=>{const n=Z.value;return n===""?p().mockCodeSnippetList.value:p().mockCodeSnippetList.value.filter(m=>m.name.toLowerCase().includes(n.toLowerCase())||m.description.toLowerCase().includes(n.toLowerCase())||m.prefix.toLowerCase().includes(n.toLowerCase()))},set:n=>{p().mockCodeSnippetList.value=n}}),{appAsideBgColor:ge,appBackground:ee}=de(),{isEditing:te}=Ue(),Ce=f(()=>te.value?ge?.value:ee?.value),ke=f(()=>te.value?"0":"10px 10px 10px 0"),xe=n=>{n.forEach(e=>{I.show=!e.isIntersecting})};let U;return Be(()=>{P(),I.show=!1,I.target=oe.None,U&&x.value&&U.unobserve(x.value)}),De(()=>{Te.closeSplashscreen(),U=new IntersectionObserver(xe,{}),x.value&&U.observe(x.value),I.target=oe.CodeSnippetList}),(n,e)=>{const m=qe,u=Ge,L=Ae,A=He,be=Me,Se=je,we=Ye;return w(),W("div",Ze,[l(m,{modelValue:o(y),"onUpdate:modelValue":e[0]||(e[0]=a=>H(y)?y.value=a:null),title:o(_),"before-close":pe,direction:"ltr",size:"80%",class:"orp-drawer"},{default:i(()=>e[10]||(e[10]=[s("div",{id:"snippet-editor","w-full":"","h-full":""},null,-1)])),_:1},8,["modelValue","title"]),s("div",et,[l(L,{modelValue:o(t),"onUpdate:modelValue":e[2]||(e[2]=a=>H(t)?t.value=a:null),title:"删除代码片段"},{footer:i(()=>[s("span",tt,[l(u,{onClick:e[1]||(e[1]=a=>t.value=!1)},{default:i(()=>e[11]||(e[11]=[B("取消")])),_:1}),l(u,{type:"danger",onClick:o(R)},{default:i(()=>e[12]||(e[12]=[B("删除")])),_:1},8,["onClick"])])]),default:i(()=>[e[13]||(e[13]=s("div",null,"确定要删除该代码片段吗?",-1))]),_:1},8,["modelValue"]),l(L,{modelValue:o(S),"onUpdate:modelValue":e[7]||(e[7]=a=>H(S)?S.value=a:null),title:"编辑代码片段信息"},{footer:i(()=>[s("span",ot,[l(u,{onClick:e[6]||(e[6]=a=>S.value=!1)},{default:i(()=>e[14]||(e[14]=[B("取消")])),_:1}),l(u,{type:"primary",onClick:o(X)},{default:i(()=>e[15]||(e[15]=[B("保存")])),_:1},8,["onClick"])])]),default:i(()=>[e[16]||(e[16]=s("div",null,"代码片段名称:",-1)),l(A,{modelValue:o(r).name,"onUpdate:modelValue":e[3]||(e[3]=a=>o(r).name=a)},null,8,["modelValue"]),e[17]||(e[17]=s("div",null,"代码片段描述:",-1)),l(A,{modelValue:o(r).description,"onUpdate:modelValue":e[4]||(e[4]=a=>o(r).description=a)},null,8,["modelValue"]),e[18]||(e[18]=s("div",null,"代码片段前缀:",-1)),l(A,{modelValue:o(r).prefix,"onUpdate:modelValue":e[5]||(e[5]=a=>o(r).prefix=a)},null,8,["modelValue"])]),_:1},8,["modelValue"]),s("div",{class:"header",ref_key:"headerRef",ref:x},[e[21]||(e[21]=s("span",{style:{"font-size":"18px"}},"代码片段列表",-1)),s("div",nt,[l(A,{class:"input",modelValue:o(I).content,"onUpdate:modelValue":e[8]||(e[8]=a=>o(I).content=a),clearable:"",placeholder:"搜索代码片段:名称、备注、前缀"},null,8,["modelValue"]),l(be,null,{default:i(()=>[l(u,{onClick:fe},{default:i(()=>e[19]||(e[19]=[B("导入")])),_:1}),l(u,{type:"primary",onClick:ce},{default:i(()=>e[20]||(e[20]=[B("新建")])),_:1})]),_:1})])],512),s("div",st,[o(T).length===0?(w(),M(Se,{key:0,description:"暂无代码片段","position-absolute":"","top-0":"","bottom-0":"","right-0":"","left-0":""})):Fe("",!0),l(o(Je),{ref_key:"el",ref:z,modelValue:o(T),"onUpdate:modelValue":e[9]||(e[9]=a=>H(T)?T.value=a:null),ghostClass:"ghost",class:"draggable-content",disabled:o(ve),animation:200,handle:".drag-handle",onStart:j,onUpdate:v,onEnd:v},{default:i(()=>[(w(!0),W($e,null,ze(o(T),a=>(w(),M(we,{key:a.id,id:a.id,onEditFile:q,onEditInfo:ue,"show-hover":o(g),onOpenFile:me,onDelCodeSnippets:b},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])])])}}}),mt=re(lt,[["__scopeId","data-v-1854edc4"]]);export{mt as default};
