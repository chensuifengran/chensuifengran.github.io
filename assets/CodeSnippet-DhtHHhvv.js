import{_ as Ce}from"./CodeIcon-IuBz9jXd.js";import{d as X,u as le,i as t,k as Z,s as Q,e as ie,c as k,l as p,m as V,o as L,a as j,n,g as q,w as i,b as s,p as D,t as M,q as I,v as _e,x as ke,z as xe,_ as ee,ap as Se,Y as be,C as Ee,D as we,S as ne,F as ye,G as Ie,H as h,I as Ve,M as Le,N as Be,bZ as ae,bS as De,P as Y,ab as Fe,E as se,j as de,X as re,J as Re,K as ue,B as Te,aj as Ne,f as $e,L as Ue,V as Ae,b_ as He}from"./index-fER-Z0jW.js";import{E as Me}from"./el-empty-DLnKRbiB.js";import{E as Oe}from"./el-drawer-O_mTgUQJ.js";import{l as ze}from"./vue-draggable-plus-BYiuCoxz.js";/* empty css                        */const Pe={class:"content drag-handle"},he={class:"info"},je={class:"menu"},qe=X({__name:"CodeSnippetListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editFile","openFile","delCodeSnippets","editInfo"],setup(G,{emit:E}){le(u=>({"85e9c468":t(c),"5341be15":t($),"241ff815":t(B),"1084c13d":t(f),"4ee6c8dd":t(F)}));const w=Z();Q(w);const{appAsideBgColor:$,appBackground:f}=ie(),y=G,F=k(()=>y.showHover?"4px":"0px"),B=k(()=>y.showHover?"all 0.5s":"none"),x=E,C=k(()=>p().mockCodeSnippetList.value.find(u=>u.id===y.id)),r=k(()=>p().mockCodeSnippetList.value.findIndex(u=>u.id===y.id)),S=V(!1),R=()=>{r.value!==void 0&&r.value!==-1&&x("delCodeSnippets",r.value)},U=()=>{r.value!==void 0&&r.value!==-1&&x("editFile",r.value)},T=()=>{r.value!==void 0&&r.value!==-1&&x("editInfo",r.value)},A=()=>{r.value!==void 0&&r.value!==-1&&x("openFile",r.value)},v=V(),c=k(()=>S.value?40+v.value.clientHeight+"px":"40px");return(u,o)=>{const b=_e,_=ke,a=xe,O=Ce;return L(),j("div",{class:"code-snippet-item",onClick:o[4]||(o[4]=J=>S.value=!t(S))},[n("div",Pe,[n("div",he,[t(S)?(L(),q(b,{key:1,class:"icon",size:"large"},{default:i(()=>o[6]||(o[6]=[n("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(L(),q(b,{key:0,class:"icon",size:"large"},{default:i(()=>o[5]||(o[5]=[n("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),s(_,{truncated:""},{default:i(()=>[D(M(t(C).name),1)]),_:1})]),n("div",je,[s(a,{class:"box-item",effect:"dark",content:"删除代码片段",placement:"bottom"},{default:i(()=>[s(b,{class:"icon",onClick:I(R,["stop"])},{default:i(()=>o[7]||(o[7]=[n("span",{"i-mdi-file-document-remove-outline":""},null,-1)])),_:1})]),_:1}),s(a,{class:"box-item",effect:"dark",content:"编辑代码片段",placement:"bottom"},{default:i(()=>[s(O,{class:"icon",onClick:I(U,["stop"])})]),_:1}),s(a,{class:"box-item",effect:"dark",content:"修改代码片段信息",placement:"bottom"},{default:i(()=>[s(b,{class:"icon",onClick:I(T,["stop"])},{default:i(()=>o[8]||(o[8]=[n("span",{"i-mdi-playlist-edit":""},null,-1)])),_:1})]),_:1}),s(a,{class:"box-item",effect:"dark",content:"打开代码片段",placement:"bottom"},{default:i(()=>[s(b,{class:"icon",onClick:I(A,["stop"])},{default:i(()=>o[9]||(o[9]=[n("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1})])]),n("div",{class:"details",ref_key:"detailsRef",ref:v},[o[10]||(o[10]=n("div",null,"代码片段ID：",-1)),n("div",{class:"text",onClick:o[0]||(o[0]=I(()=>{},["stop"]))},M(t(C).id),1),o[11]||(o[11]=n("div",null,"前缀：",-1)),n("div",{class:"text",onClick:o[1]||(o[1]=I(()=>{},["stop"]))},M(t(C).prefix),1),o[12]||(o[12]=n("div",null,"保存路径：",-1)),n("div",{class:"text",onClick:o[2]||(o[2]=I(()=>{},["stop"]))},M(t(C).filePath),1),o[13]||(o[13]=n("div",null,"代码片段描述(备注)：",-1)),n("div",{class:"description",onClick:o[3]||(o[3]=I(()=>{},["stop"]))},M(t(C).description),1)],512)])}}}),Ge=ee(qe,[["__scopeId","data-v-fabe7830"]]),Je={class:"list","h-full":""},Ke={class:"dialog-footer"},Ye={class:"dialog-footer"},W="snippet-editor",We=X({__name:"CodeSnippetList",setup(G){const E=V(!1),w=V(""),$=Z(),f=Se(ae);Q($);const y=V();let F=()=>{};const B=V(!0),{editorInit:x,disposeEditor:C,findEditor:r,setText:S,editorValue:R}=be(),U=()=>{B.value=!1},T=()=>{B.value=!0},A=k(()=>p().mockCodeSnippetList.value.find(l=>l.id===w.value)?.name||""),v=/export \{\s?\};?/g,c=async l=>{const e=R.value.replace(v,""),g=p().mockCodeSnippetList.value.find(N=>N.id===w.value);if(!g){l();return}const m=g.content;e.trim()!==m?.trim()&&De.confirm("代码已经修改,是否保存?","提示",{confirmButtonText:"保存",cancelButtonText:"不保存",distinguishCancelAndClose:!0}).then(async()=>{{g.content=e,Y({title:"提示",message:"保存成功",type:"success",position:"bottom-right"}),l();return}}).catch(l),l()},u=V(!1),o=l=>{F=async()=>{{p().mockCodeSnippetList.value.splice(l,1),Y({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),u.value=!1;return}},u.value=!0},b=async l=>{E.value=!0,await Fe();const e=p().mockCodeSnippetList.value[l];w.value=e.id,r(W)||await x(W,!1,!1);const m=e.content;S(W,`export {};
`+m?.trim()||"")},_=V(!1),a=Ee({name:"",description:"",prefix:""});let O=()=>{},J="";const pe=async l=>{const e=p().mockCodeSnippetList.value[l];a.name=e.name,J=e.name,a.description=e.description,a.prefix=e.prefix,O=()=>{if(p().mockCodeSnippetList.value.find(N=>N.name===a.name)&&J!==a.name){se.warning("已存在相同名称的代码片段，换个名字试试吧");return}const m=p().mockCodeSnippetList.value[l];m.name=a.name,m.description=a.description,m.prefix=a.prefix,_.value=!1,se.success("修改成功")},_.value=!0},ce=async l=>{{Y({title:"提示",message:"playground环境无法打开代码片段文件",type:"warning",position:"bottom-right"});return}},{trueSearch:te,searchInfo:z,ingoreObserver:oe}=de(),me=k(()=>te.value!==""),H=k({get:()=>{const l=te.value;return l===""?p().mockCodeSnippetList.value:p().mockCodeSnippetList.value.filter(g=>g.name.toLowerCase().includes(l.toLowerCase())||g.description.toLowerCase().includes(l.toLowerCase())||g.prefix.toLowerCase().includes(l.toLowerCase()))},set:l=>{p().mockCodeSnippetList.value=l}}),fe=l=>{l.forEach(e=>{oe.value||(z.show=!e.isIntersecting)})};let P;return we(()=>{C(),oe.value=!0,z.show=!1,z.target=ne.None,P&&f?.value&&P.unobserve(f?.value)}),ye(()=>{Ie.closeSplashscreen(),P=new IntersectionObserver(fe,{}),f?.value&&P.observe(f?.value),z.target=ne.CodeSnippetList}),(l,e)=>{const g=Oe,m=re,N=Re,K=ue,ve=Me,ge=Ge;return L(),j("div",Je,[s(g,{modelValue:t(E),"onUpdate:modelValue":e[0]||(e[0]=d=>h(E)?E.value=d:null),title:t(A),"before-close":c,direction:"ltr",size:"80%"},{default:i(()=>e[9]||(e[9]=[n("div",{id:"snippet-editor","w-full":"","h-full":""},null,-1)])),_:1},8,["modelValue","title"]),s(N,{modelValue:t(u),"onUpdate:modelValue":e[2]||(e[2]=d=>h(u)?u.value=d:null),title:"删除代码片段"},{footer:i(()=>[n("span",Ke,[s(m,{onClick:e[1]||(e[1]=d=>u.value=!1)},{default:i(()=>e[10]||(e[10]=[D("取消")])),_:1}),s(m,{type:"danger",onClick:t(F)},{default:i(()=>e[11]||(e[11]=[D("删除")])),_:1},8,["onClick"])])]),default:i(()=>[e[12]||(e[12]=n("div",null,"确定要删除该代码片段吗?",-1))]),_:1},8,["modelValue"]),s(N,{modelValue:t(_),"onUpdate:modelValue":e[7]||(e[7]=d=>h(_)?_.value=d:null),title:"编辑代码片段信息"},{footer:i(()=>[n("span",Ye,[s(m,{onClick:e[6]||(e[6]=d=>_.value=!1)},{default:i(()=>e[13]||(e[13]=[D("取消")])),_:1}),s(m,{type:"primary",onClick:t(O)},{default:i(()=>e[14]||(e[14]=[D("保存")])),_:1},8,["onClick"])])]),default:i(()=>[e[15]||(e[15]=n("div",null,"代码片段名称:",-1)),s(K,{modelValue:t(a).name,"onUpdate:modelValue":e[3]||(e[3]=d=>t(a).name=d)},null,8,["modelValue"]),e[16]||(e[16]=n("div",null,"代码片段描述:",-1)),s(K,{modelValue:t(a).description,"onUpdate:modelValue":e[4]||(e[4]=d=>t(a).description=d)},null,8,["modelValue"]),e[17]||(e[17]=n("div",null,"代码片段前缀:",-1)),s(K,{modelValue:t(a).prefix,"onUpdate:modelValue":e[5]||(e[5]=d=>t(a).prefix=d)},null,8,["modelValue"])]),_:1},8,["modelValue"]),t(H).length===0?(L(),q(ve,{key:0,description:"暂无代码片段","position-absolute":"","top-0":"","bottom-0":"","right-0":"","left-0":""})):Ve("",!0),s(t(ze),{ref_key:"el",ref:y,modelValue:t(H),"onUpdate:modelValue":e[8]||(e[8]=d=>h(H)?H.value=d:null),ghostClass:"ghost",class:"draggable-content",disabled:t(me),animation:200,handle:".drag-handle",onStart:U,onUpdate:T,onEnd:T},{default:i(()=>[(L(!0),j(Le,null,Be(t(H),d=>(L(),q(ge,{key:d.id,id:d.id,onEditFile:b,onEditInfo:pe,"show-hover":t(B),onOpenFile:ce,onDelCodeSnippets:o},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])}}}),Xe=ee(We,[["__scopeId","data-v-da28d4f1"]]),Ze={class:"code-snippet"},Qe={class:"header-right"},et=X({__name:"CodeSnippet",setup(G){le(v=>({b984766c:t(U),"449bd2d3":t(T),"0acd5113":t(S)}));const E=Z(),w=Te("headerRef");Ne(ae,w),Q(E);const{saveDialog:$,saveConfig:f,showCopyBtn:y}=He(),F=()=>{f.code="",f.name="操作记录",f.description="",f.prefix="",$.value=!0,y.value=!1},B=async()=>{{const v=p().mockCodeSnippetList;v.value.push({id:Ae(),name:"操作记录"+v.value.length,description:"操作记录"+v.value.length,prefix:"test"+v.value.length,content:"",filePath:"playground"});return}},{searchInfo:x,ingoreObserver:C}=de(),{appAsideBgColor:r,appBackground:S}=ie(),{isEditing:R}=$e(),U=k(()=>R.value?r?.value:S?.value),T=k(()=>R.value?"0":"10px 10px 10px 0"),A=()=>{C.value&&(C.value=!1)};return(v,c)=>{const u=ue,o=re,b=Ue,_=Xe;return L(),j("div",{class:"container-root",onScroll:A},[n("div",Ze,[n("div",{class:"header",ref_key:"headerRef",ref:w},[c[3]||(c[3]=n("span",{style:{"font-size":"18px"}},"代码片段列表",-1)),n("div",Qe,[s(u,{class:"input",modelValue:t(x).content,"onUpdate:modelValue":c[0]||(c[0]=a=>t(x).content=a),clearable:"",placeholder:"搜索代码片段:名称、备注、前缀"},null,8,["modelValue"]),s(b,null,{default:i(()=>[s(o,{onClick:B},{default:i(()=>c[1]||(c[1]=[D("导入")])),_:1}),s(o,{type:"primary",onClick:F},{default:i(()=>c[2]||(c[2]=[D("新建")])),_:1})]),_:1})])],512),s(_)])],32)}}}),at=ee(et,[["__scopeId","data-v-0d6e2ff5"]]);export{at as default};
