import{_ as Ce}from"./CodeIcon-BmYyo8iD.js";import{d as Y,u as le,m as t,M as X,e as k,r as V,o as L,i as j,a as n,c as q,w as i,j as s,l as D,t as O,aN as I,E as _e,q as ke,ab as xe,ba as Se,A as be,ad as we,g as ye,ae as z,a9 as Ee,ah as Ie,aw as Ve,aQ as Le,U as Be,B as Q,n as De,F as ne,aS as Re,p as ie,ai as Fe,ak as ae,aR as Te,aO as Ne,bb as Ue,aP as $e,G as Ae}from"./.pnpm-B-riUXVB.js";import{c as Z,u as de,d as p,_ as ee,j as He,S as se,i as Oe,O as re,b as ue,a as Me,P as Pe}from"./index-DhEYsvJM.js";const he={class:"content drag-handle"},ze={class:"info"},je={class:"menu"},qe=Y({__name:"CodeSnippetListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editFile","openFile","delCodeSnippets","editInfo"],setup(G,{emit:w}){le(u=>({"85e9c468":t(c),"5341be15":t(U),"241ff815":t(B),"1084c13d":t(f),"4ee6c8dd":t(R)}));const y=Z();X(y);const{appAsideBgColor:U,appBackground:f}=de(),E=G,R=k(()=>E.showHover?"4px":"0px"),B=k(()=>E.showHover?"all 0.5s":"none"),x=w,C=k(()=>p().mockCodeSnippetList.value.find(u=>u.id===E.id)),r=k(()=>p().mockCodeSnippetList.value.findIndex(u=>u.id===E.id)),S=V(!1),F=()=>{r.value!==void 0&&r.value!==-1&&x("delCodeSnippets",r.value)},$=()=>{r.value!==void 0&&r.value!==-1&&x("editFile",r.value)},T=()=>{r.value!==void 0&&r.value!==-1&&x("editInfo",r.value)},A=()=>{r.value!==void 0&&r.value!==-1&&x("openFile",r.value)},v=V(),c=k(()=>S.value?40+v.value.clientHeight+"px":"40px");return(u,o)=>{const b=_e,_=ke,a=xe,M=Ce;return L(),j("div",{class:"code-snippet-item",onClick:o[4]||(o[4]=J=>S.value=!t(S))},[n("div",he,[n("div",ze,[t(S)?(L(),q(b,{key:1,class:"icon",size:"large"},{default:i(()=>o[6]||(o[6]=[n("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(L(),q(b,{key:0,class:"icon",size:"large"},{default:i(()=>o[5]||(o[5]=[n("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),s(_,{truncated:""},{default:i(()=>[D(O(t(C).name),1)]),_:1})]),n("div",je,[s(a,{class:"box-item",effect:"dark",content:"删除代码片段",placement:"bottom"},{default:i(()=>[s(b,{class:"icon",onClick:I(F,["stop"])},{default:i(()=>o[7]||(o[7]=[n("span",{"i-mdi-file-document-remove-outline":""},null,-1)])),_:1})]),_:1}),s(a,{class:"box-item",effect:"dark",content:"编辑代码片段",placement:"bottom"},{default:i(()=>[s(M,{class:"icon",onClick:I($,["stop"])})]),_:1}),s(a,{class:"box-item",effect:"dark",content:"修改代码片段信息",placement:"bottom"},{default:i(()=>[s(b,{class:"icon",onClick:I(T,["stop"])},{default:i(()=>o[8]||(o[8]=[n("span",{"i-mdi-playlist-edit":""},null,-1)])),_:1})]),_:1}),s(a,{class:"box-item",effect:"dark",content:"打开代码片段",placement:"bottom"},{default:i(()=>[s(b,{class:"icon",onClick:I(A,["stop"])},{default:i(()=>o[9]||(o[9]=[n("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1})])]),n("div",{class:"details",ref_key:"detailsRef",ref:v},[o[10]||(o[10]=n("div",null,"代码片段ID：",-1)),n("div",{class:"text",onClick:o[0]||(o[0]=I(()=>{},["stop"]))},O(t(C).id),1),o[11]||(o[11]=n("div",null,"前缀：",-1)),n("div",{class:"text",onClick:o[1]||(o[1]=I(()=>{},["stop"]))},O(t(C).prefix),1),o[12]||(o[12]=n("div",null,"保存路径：",-1)),n("div",{class:"text",onClick:o[2]||(o[2]=I(()=>{},["stop"]))},O(t(C).filePath),1),o[13]||(o[13]=n("div",null,"代码片段描述(备注)：",-1)),n("div",{class:"description",onClick:o[3]||(o[3]=I(()=>{},["stop"]))},O(t(C).description),1)],512)])}}}),Ge=ee(qe,[["__scopeId","data-v-fabe7830"]]),Je={class:"list","h-full":""},Ke={class:"dialog-footer"},Qe={class:"dialog-footer"},W="snippet-editor",We=Y({__name:"CodeSnippetList",setup(G){const w=V(!1),y=V(""),U=Z(),f=Se(re);X(U);const E=V();let R=()=>{};const B=V(!0),{editorInit:x,disposeEditor:C,findEditor:r,setText:S,editorValue:F}=He(),$=()=>{B.value=!1},T=()=>{B.value=!0},A=k(()=>p().mockCodeSnippetList.value.find(l=>l.id===y.value)?.name||""),v=/export \{\s?\};?/g,c=async l=>{const e=F.value.replace(v,""),g=p().mockCodeSnippetList.value.find(N=>N.id===y.value);if(!g){l();return}const m=g.content;e.trim()!==m?.trim()&&Be.confirm("代码已经修改,是否保存?","提示",{confirmButtonText:"保存",cancelButtonText:"不保存",distinguishCancelAndClose:!0}).then(async()=>{{g.content=e,Q({title:"提示",message:"保存成功",type:"success",position:"bottom-right"}),l();return}}).catch(l),l()},u=V(!1),o=l=>{R=async()=>{{p().mockCodeSnippetList.value.splice(l,1),Q({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),u.value=!1;return}},u.value=!0},b=async l=>{w.value=!0,await De();const e=p().mockCodeSnippetList.value[l];y.value=e.id,r(W)||await x(W,!1,!1);const m=e.content;S(W,`export {};
`+m?.trim()||"")},_=V(!1),a=be({name:"",description:"",prefix:""});let M=()=>{},J="";const pe=async l=>{const e=p().mockCodeSnippetList.value[l];a.name=e.name,J=e.name,a.description=e.description,a.prefix=e.prefix,M=()=>{if(p().mockCodeSnippetList.value.find(N=>N.name===a.name)&&J!==a.name){ne.warning("已存在相同名称的代码片段，换个名字试试吧");return}const m=p().mockCodeSnippetList.value[l];m.name=a.name,m.description=a.description,m.prefix=a.prefix,_.value=!1,ne.success("修改成功")},_.value=!0},ce=async l=>{{Q({title:"提示",message:"playground环境无法打开代码片段文件",type:"warning",position:"bottom-right"});return}},{trueSearch:te,searchInfo:P,ingoreObserver:oe}=ue(),me=k(()=>te.value!==""),H=k({get:()=>{const l=te.value;return l===""?p().mockCodeSnippetList.value:p().mockCodeSnippetList.value.filter(g=>g.name.toLowerCase().includes(l.toLowerCase())||g.description.toLowerCase().includes(l.toLowerCase())||g.prefix.toLowerCase().includes(l.toLowerCase()))},set:l=>{p().mockCodeSnippetList.value=l}}),fe=l=>{l.forEach(e=>{oe.value||(P.show=!e.isIntersecting)})};let h;return we(()=>{C(),oe.value=!0,P.show=!1,P.target=se.None,h&&f?.value&&h.unobserve(f?.value)}),ye(()=>{Oe.closeSplashscreen(),h=new IntersectionObserver(fe,{}),f?.value&&h.observe(f?.value),P.target=se.CodeSnippetList}),(l,e)=>{const g=Re,m=ie,N=Fe,K=ae,ve=Te,ge=Ge;return L(),j("div",Je,[s(g,{modelValue:t(w),"onUpdate:modelValue":e[0]||(e[0]=d=>z(w)?w.value=d:null),title:t(A),"before-close":c,direction:"ltr",size:"80%"},{default:i(()=>e[9]||(e[9]=[n("div",{id:"snippet-editor","w-full":"","h-full":""},null,-1)])),_:1},8,["modelValue","title"]),s(N,{modelValue:t(u),"onUpdate:modelValue":e[2]||(e[2]=d=>z(u)?u.value=d:null),title:"删除代码片段"},{footer:i(()=>[n("span",Ke,[s(m,{onClick:e[1]||(e[1]=d=>u.value=!1)},{default:i(()=>e[10]||(e[10]=[D("取消")])),_:1}),s(m,{type:"danger",onClick:t(R)},{default:i(()=>e[11]||(e[11]=[D("删除")])),_:1},8,["onClick"])])]),default:i(()=>[e[12]||(e[12]=n("div",null,"确定要删除该代码片段吗?",-1))]),_:1},8,["modelValue"]),s(N,{modelValue:t(_),"onUpdate:modelValue":e[7]||(e[7]=d=>z(_)?_.value=d:null),title:"编辑代码片段信息"},{footer:i(()=>[n("span",Qe,[s(m,{onClick:e[6]||(e[6]=d=>_.value=!1)},{default:i(()=>e[13]||(e[13]=[D("取消")])),_:1}),s(m,{type:"primary",onClick:t(M)},{default:i(()=>e[14]||(e[14]=[D("保存")])),_:1},8,["onClick"])])]),default:i(()=>[e[15]||(e[15]=n("div",null,"代码片段名称:",-1)),s(K,{modelValue:t(a).name,"onUpdate:modelValue":e[3]||(e[3]=d=>t(a).name=d)},null,8,["modelValue"]),e[16]||(e[16]=n("div",null,"代码片段描述:",-1)),s(K,{modelValue:t(a).description,"onUpdate:modelValue":e[4]||(e[4]=d=>t(a).description=d)},null,8,["modelValue"]),e[17]||(e[17]=n("div",null,"代码片段前缀:",-1)),s(K,{modelValue:t(a).prefix,"onUpdate:modelValue":e[5]||(e[5]=d=>t(a).prefix=d)},null,8,["modelValue"])]),_:1},8,["modelValue"]),t(H).length===0?(L(),q(ve,{key:0,description:"暂无代码片段","position-absolute":"","top-0":"","bottom-0":"","right-0":"","left-0":""})):Ee("",!0),s(t(Le),{ref_key:"el",ref:E,modelValue:t(H),"onUpdate:modelValue":e[8]||(e[8]=d=>z(H)?H.value=d:null),ghostClass:"ghost",class:"draggable-content",disabled:t(me),animation:200,handle:".drag-handle",onStart:$,onUpdate:T,onEnd:T},{default:i(()=>[(L(!0),j(Ie,null,Ve(t(H),d=>(L(),q(ge,{key:d.id,id:d.id,onEditFile:b,onEditInfo:pe,"show-hover":t(B),onOpenFile:ce,onDelCodeSnippets:o},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])}}}),Ye=ee(We,[["__scopeId","data-v-da28d4f1"]]),Xe={class:"code-snippet"},Ze={class:"header-right"},et=Y({__name:"CodeSnippet",setup(G){le(v=>({b984766c:t($),"449bd2d3":t(T),"0acd5113":t(S)}));const w=Z(),y=Ne("headerRef");Ue(re,y),X(w);const{saveDialog:U,saveConfig:f,showCopyBtn:E}=Pe(),R=()=>{f.code="",f.name="操作记录",f.description="",f.prefix="",U.value=!0,E.value=!1},B=async()=>{{const v=p().mockCodeSnippetList;v.value.push({id:Ae(),name:"操作记录"+v.value.length,description:"操作记录"+v.value.length,prefix:"test"+v.value.length,content:"",filePath:"playground"});return}},{searchInfo:x,ingoreObserver:C}=ue(),{appAsideBgColor:r,appBackground:S}=de(),{isEditing:F}=Me(),$=k(()=>F.value?r?.value:S?.value),T=k(()=>F.value?"0":"10px 10px 10px 0"),A=()=>{C.value&&(C.value=!1)};return(v,c)=>{const u=ae,o=ie,b=$e,_=Ye;return L(),j("div",{class:"container-root",onScroll:A},[n("div",Xe,[n("div",{class:"header",ref_key:"headerRef",ref:y},[c[3]||(c[3]=n("span",{style:{"font-size":"18px"}},"代码片段列表",-1)),n("div",Ze,[s(u,{class:"input",modelValue:t(x).content,"onUpdate:modelValue":c[0]||(c[0]=a=>t(x).content=a),clearable:"",placeholder:"搜索代码片段:名称、备注、前缀"},null,8,["modelValue"]),s(b,null,{default:i(()=>[s(o,{onClick:B},{default:i(()=>c[1]||(c[1]=[D("导入")])),_:1}),s(o,{type:"primary",onClick:R},{default:i(()=>c[2]||(c[2]=[D("新建")])),_:1})]),_:1})])],512),s(_)])],32)}}}),st=ee(et,[["__scopeId","data-v-0d6e2ff5"]]);export{st as default};
