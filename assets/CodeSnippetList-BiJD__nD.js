import{_ as ye}from"./CodeIcon-DI3GK8Zo.js";import{d as se,u as le,i as o,j as ie,s as ae,e as de,c as f,k as p,l as x,o as y,a as Q,m as s,g as $,w as i,b as l,n as w,t as F,p as k,E as be,q as Ve,x as Ee,_ as re,y as Le,V as Ie,z as Be,A as De,S as oe,B as Te,C as Fe,D as H,F as Ne,bS as Re,N as J,G as Ue,f as Ae,H as He,I as $e,J as Me,K as ze,L as Oe,aa as Pe,ab as ne,Q as qe,T as Ge,a0 as he}from"./index-waqMAD9w.js";import{E as je}from"./el-empty-DKbGgi1T.js";/* empty css                        */import{E as Je}from"./el-drawer-CnJYKWkZ.js";import{l as Ke}from"./vue-draggable-plus-yIVIIXiv.js";const Qe={class:"content drag-handle"},We={class:"info"},Xe={class:"menu"},Ye=se({__name:"CodeSnippetListItem",props:{id:{type:String,required:!0},showHover:{type:Boolean,default:!0}},emits:["editFile","openFile","delCodeSnippets","editInfo"],setup(W,{emit:b}){le(v=>({"6e968de5":o(h),"2a05759c":o(M),"35a9e55c":o(N),"220eae84":o(S),"509a0236":o(z)}));const D=ie();ae(D);const{appAsideBgColor:M,appBackground:S}=de(),V=W,z=f(()=>V.showHover?"4px":"0px"),N=f(()=>V.showHover?"all 0.5s":"none"),E=b,c=f(()=>p().mockCodeSnippetList.value.find(v=>v.id===V.id)),r=f(()=>p().mockCodeSnippetList.value.findIndex(v=>v.id===V.id)),g=x(!1),O=()=>{r.value!==void 0&&r.value!==-1&&E("delCodeSnippets",r.value)},P=()=>{r.value!==void 0&&r.value!==-1&&E("editFile",r.value)},q=()=>{r.value!==void 0&&r.value!==-1&&E("editInfo",r.value)},G=()=>{r.value!==void 0&&r.value!==-1&&E("openFile",r.value)},R=x(),h=f(()=>g.value?40+R.value.clientHeight+"px":"40px");return(v,t)=>{const _=be,j=Ve,L=Ee,C=ye;return y(),Q("div",{class:"code-snippet-item",onClick:t[4]||(t[4]=d=>g.value=!o(g))},[s("div",Qe,[s("div",We,[o(g)?(y(),$(_,{key:1,class:"icon",size:"large"},{default:i(()=>t[6]||(t[6]=[s("div",{"i-solar-alt-arrow-down-line-duotone":""},null,-1)])),_:1})):(y(),$(_,{key:0,class:"icon",size:"large"},{default:i(()=>t[5]||(t[5]=[s("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1)])),_:1})),l(j,{truncated:""},{default:i(()=>[w(F(o(c).name),1)]),_:1})]),s("div",Xe,[l(L,{class:"box-item",effect:"dark",content:"删除代码片段",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:k(O,["stop"])},{default:i(()=>t[7]||(t[7]=[s("span",{"i-mdi-file-document-remove-outline":""},null,-1)])),_:1})]),_:1}),l(L,{class:"box-item",effect:"dark",content:"编辑代码片段",placement:"bottom"},{default:i(()=>[l(C,{class:"icon",onClick:k(P,["stop"])})]),_:1}),l(L,{class:"box-item",effect:"dark",content:"修改代码片段信息",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:k(q,["stop"])},{default:i(()=>t[8]||(t[8]=[s("span",{"i-mdi-playlist-edit":""},null,-1)])),_:1})]),_:1}),l(L,{class:"box-item",effect:"dark",content:"打开代码片段",placement:"bottom"},{default:i(()=>[l(_,{class:"icon",onClick:k(G,["stop"])},{default:i(()=>t[9]||(t[9]=[s("span",{"i-mdi-folder-eye-outline":""},null,-1)])),_:1})]),_:1})])]),s("div",{class:"details",ref_key:"detailsRef",ref:R},[t[10]||(t[10]=s("div",null,"代码片段ID：",-1)),s("div",{class:"text",onClick:t[0]||(t[0]=k(()=>{},["stop"]))},F(o(c).id),1),t[11]||(t[11]=s("div",null,"前缀：",-1)),s("div",{class:"text",onClick:t[1]||(t[1]=k(()=>{},["stop"]))},F(o(c).prefix),1),t[12]||(t[12]=s("div",null,"保存路径：",-1)),s("div",{class:"text",onClick:t[2]||(t[2]=k(()=>{},["stop"]))},F(o(c).filePath),1),t[13]||(t[13]=s("div",null,"代码片段描述(备注)：",-1)),s("div",{class:"description",onClick:t[3]||(t[3]=k(()=>{},["stop"]))},F(o(c).description),1)],512)])}}}),Ze=re(Ye,[["__scopeId","data-v-7d71038c"]]),et={class:"container-root"},tt={class:"code-snippet-list-div"},ot={class:"dialog-footer"},nt={class:"dialog-footer"},st={class:"header-right"},lt={class:"list","h-full":""},K="snippet-editor",it=se({__name:"CodeSnippetList",setup(W){le(n=>({"465d2706":o(Ce),"5d1f980f":o(ke),68141552:o(ee)}));const b=x(!1),D=x(""),M=ie(),S=Le("headerRef");ae(M);const V=f(()=>p().mockCodeSnippetList.value.find(n=>n.id===D.value)?.name||""),z=x();let N=()=>{};const{saveDialog:E,saveConfig:c,showCopyBtn:r}=he(),g=x(!0),{editorInit:O,disposeEditor:P,findEditor:q,setText:G,editorValue:R}=Ie(),h=()=>{g.value=!1},v=()=>{g.value=!0},t=x(!1),_=n=>{N=async()=>{{p().mockCodeSnippetList.value.splice(n,1),J({title:"提示",message:"删除成功",type:"success",position:"bottom-right"}),t.value=!1;return}},t.value=!0},j=/export \{\s?\};?/g,L=async n=>{b.value=!0,await Pe();const e=p().mockCodeSnippetList.value[n];D.value=e.id,q(K)||await O(K,!1,!1);const u=e.content;G(K,`export {};
`+u?.trim()||"")},C=x(!1),d=Be({name:"",description:"",prefix:""});let X=()=>{},Y="";const ue=async n=>{const e=p().mockCodeSnippetList.value[n];d.name=e.name,Y=e.name,d.description=e.description,d.prefix=e.prefix,X=()=>{if(p().mockCodeSnippetList.value.find(B=>B.name===d.name)&&Y!==d.name){ne.warning("已存在相同名称的代码片段，换个名字试试吧");return}const u=p().mockCodeSnippetList.value[n];u.name=d.name,u.description=d.description,u.prefix=d.prefix,C.value=!1,ne.success("修改成功")},C.value=!0},pe=async n=>{const e=R.value.replace(j,""),m=p().mockCodeSnippetList.value.find(B=>B.id===D.value);if(!m){n();return}const u=m.content;e.trim()!==u?.trim()&&Re.confirm("代码已经修改,是否保存?","提示",{confirmButtonText:"保存",cancelButtonText:"不保存",distinguishCancelAndClose:!0}).then(async()=>{{m.content=e,J({title:"提示",message:"保存成功",type:"success",position:"bottom-right"}),n();return}}).catch(n),n()},me=async n=>{{J({title:"提示",message:"playground环境无法打开代码片段文件",type:"warning",position:"bottom-right"});return}},ce=()=>{c.code="",c.name="操作记录",c.description="",c.prefix="",E.value=!0,r.value=!1},fe=async()=>{{const n=p().mockCodeSnippetList;n.value.push({id:qe(),name:"操作记录"+n.value.length,description:"操作记录"+n.value.length,prefix:"test"+n.value.length,content:"",filePath:"playground"});return}},{trueSearch:Z,searchInfo:I}=Ue(),ve=f(()=>Z.value!==""),T=f({get:()=>{const n=Z.value;return n===""?p().mockCodeSnippetList.value:p().mockCodeSnippetList.value.filter(m=>m.name.toLowerCase().includes(n.toLowerCase())||m.description.toLowerCase().includes(n.toLowerCase())||m.prefix.toLowerCase().includes(n.toLowerCase()))},set:n=>{p().mockCodeSnippetList.value=n}}),{appAsideBgColor:ge,appBackground:ee}=de(),{isEditing:te}=Ae(),Ce=f(()=>te.value?ge?.value:ee?.value),ke=f(()=>te.value?"0":"10px 10px 10px 0"),xe=n=>{n.forEach(e=>{I.show=!e.isIntersecting})};let U;return De(()=>{P(),I.show=!1,I.target=oe.None,U&&S.value&&U.unobserve(S.value)}),Te(()=>{Fe.closeSplashscreen(),U=new IntersectionObserver(xe,{}),S.value&&U.observe(S.value),I.target=oe.CodeSnippetList}),(n,e)=>{const m=Je,u=Ge,B=He,A=$e,Se=Me,_e=je,we=Ze;return y(),Q("div",et,[l(m,{modelValue:o(b),"onUpdate:modelValue":e[0]||(e[0]=a=>H(b)?b.value=a:null),title:o(V),"before-close":pe,direction:"ltr",size:"80%",class:"orp-drawer"},{default:i(()=>e[10]||(e[10]=[s("div",{id:"snippet-editor","w-full":"","h-full":""},null,-1)])),_:1},8,["modelValue","title"]),s("div",tt,[l(B,{modelValue:o(t),"onUpdate:modelValue":e[2]||(e[2]=a=>H(t)?t.value=a:null),title:"删除代码片段"},{footer:i(()=>[s("span",ot,[l(u,{onClick:e[1]||(e[1]=a=>t.value=!1)},{default:i(()=>e[11]||(e[11]=[w("取消")])),_:1}),l(u,{type:"danger",onClick:o(N)},{default:i(()=>e[12]||(e[12]=[w("删除")])),_:1},8,["onClick"])])]),default:i(()=>[e[13]||(e[13]=s("div",null,"确定要删除该代码片段吗?",-1))]),_:1},8,["modelValue"]),l(B,{modelValue:o(C),"onUpdate:modelValue":e[7]||(e[7]=a=>H(C)?C.value=a:null),title:"编辑代码片段信息"},{footer:i(()=>[s("span",nt,[l(u,{onClick:e[6]||(e[6]=a=>C.value=!1)},{default:i(()=>e[14]||(e[14]=[w("取消")])),_:1}),l(u,{type:"primary",onClick:o(X)},{default:i(()=>e[15]||(e[15]=[w("保存")])),_:1},8,["onClick"])])]),default:i(()=>[e[16]||(e[16]=s("div",null,"代码片段名称:",-1)),l(A,{modelValue:o(d).name,"onUpdate:modelValue":e[3]||(e[3]=a=>o(d).name=a)},null,8,["modelValue"]),e[17]||(e[17]=s("div",null,"代码片段描述:",-1)),l(A,{modelValue:o(d).description,"onUpdate:modelValue":e[4]||(e[4]=a=>o(d).description=a)},null,8,["modelValue"]),e[18]||(e[18]=s("div",null,"代码片段前缀:",-1)),l(A,{modelValue:o(d).prefix,"onUpdate:modelValue":e[5]||(e[5]=a=>o(d).prefix=a)},null,8,["modelValue"])]),_:1},8,["modelValue"]),s("div",{class:"header",ref_key:"headerRef",ref:S},[e[21]||(e[21]=s("span",{style:{"font-size":"18px"}},"代码片段列表",-1)),s("div",st,[l(A,{class:"input",modelValue:o(I).content,"onUpdate:modelValue":e[8]||(e[8]=a=>o(I).content=a),clearable:"",placeholder:"搜索代码片段:名称、备注、前缀"},null,8,["modelValue"]),l(Se,null,{default:i(()=>[l(u,{onClick:fe},{default:i(()=>e[19]||(e[19]=[w("导入")])),_:1}),l(u,{type:"primary",onClick:ce},{default:i(()=>e[20]||(e[20]=[w("新建")])),_:1})]),_:1})])],512),s("div",lt,[o(T).length===0?(y(),$(_e,{key:0,description:"暂无代码片段","position-absolute":"","top-0":"","bottom-0":"","right-0":"","left-0":""})):Ne("",!0),l(o(Ke),{ref_key:"el",ref:z,modelValue:o(T),"onUpdate:modelValue":e[9]||(e[9]=a=>H(T)?T.value=a:null),ghostClass:"ghost",class:"draggable-content",disabled:o(ve),animation:200,handle:".drag-handle",onStart:h,onUpdate:v,onEnd:v},{default:i(()=>[(y(!0),Q(ze,null,Oe(o(T),a=>(y(),$(we,{key:a.id,id:a.id,onEditFile:L,onEditInfo:ue,"show-hover":o(g),onOpenFile:me,onDelCodeSnippets:_},null,8,["id","show-hover"]))),128))]),_:1},8,["modelValue","disabled"])])])])}}}),ct=re(it,[["__scopeId","data-v-57a6cc6a"]]);export{ct as default};
