import{o as u,c as w,w as a,a as l,E as j,d as ne,r as c,J as R,M as ae,e as oe,g as ie,ad as ue,a7 as $,m as t,i as U,j as n,p as v,l as i,ae as T,t as y,a9 as E,ah as H,aw as F,a8 as re,ai as de,aa as pe,az as me,ax as ve,ay as fe,as as ge,bv as ce,F as x,B as ye,bw as Y,bx as we}from"./.pnpm-B-riUXVB.js";import{_ as A,k as Ve,a2 as _e,Y as ke,u as Ue,a3 as Se,I as be}from"./index-DhEYsvJM.js";const Ce={};function Pe(B,r){const V=j;return u(),w(V,{size:"small"},{default:a(()=>r[0]||(r[0]=[l("span",{"i-solar-moon-bold":""},null,-1)])),_:1})}const De=A(Ce,[["render",Pe]]),Ee={};function ze(B,r){const V=j;return u(),w(V,{size:"small"},{default:a(()=>r[0]||(r[0]=[l("span",{"i-solar-sun-2-bold":""},null,-1)])),_:1})}const Ie=A(Ee,[["render",ze]]),Te=["element-loading-text"],xe={class:"dialog-content"},Ae={class:"btn-content"},Be={class:"setting-item"},Ge={class:"setting-item"},Me={class:"setting-item"},Le={class:"setting-item"},Ne={key:0,class:"setting-title"},Oe={key:1,class:"setting-item"},Re={class:"setting-item"},$e={class:"setting-item"},He={class:"setting-item"},Fe={class:"setting-item"},Ye={class:"setting-item"},je={class:"setting-item"},Je=ne({__name:"AppSetting",setup(B){const r=c(!1);R(r,async m=>{});const{getDepStateType:V}=_e,{goInstallDeps:G,syncData:We}=ke(),J=c("playground"),W=c(!1),q=c(""),S=c(!1),M=Ve(),{app:p,envSetting:b,ocr:o,view:L,editor:_}=ae(M),{isDark:N}=Ue(),f=c(!1);f.value=N.value;let z;R(f,()=>{z&&clearTimeout(z),z=setTimeout(()=>{N.value=f.value},300)});const K=async()=>{{b.value.workDir="E:\\fr-script\\workdir";return}},Q=async()=>{{b.value.screenshotSavePath="E:\\fr-script\\workdir\\screenshot.png";return}},O=async(m,e)=>!0,X=async m=>!0;let g=!0;const Z=async(m,e=!0)=>{try{const P=await X(m);if(e&&!P){g&&x.error("切换失败,目标依赖缺失！"),o.value.value=o.value.value==="CPU"?"GPU":"CPU";return}const d=await O(m,"ppocr.dll"),k=await O(m,"paddle_inference.dll");d&&k?g?ye({title:"切换OCR运行方式",dangerouslyUseHTMLString:!0,position:"bottom-right",message:Y("div",{class:"notification-message-div"},["重启软件后生效",Y(v,{size:"small",class:"notification-message-button",type:"primary",onClick:()=>{be||we()}},"立即重启")]),type:"success",duration:3e3}):g=!0:g?(x.error("切换失败"),o.value.value=o.value.value==="CPU"?"GPU":"CPU"):g=!0}catch{g&&x.error("切换失败"),o.value.value=o.value.value==="CPU"?"GPU":"CPU"}},h=async()=>{await Z(o.value.value)},C=oe(()=>!1),ee=async()=>{},{goAppUpdate:te}=Se();return ie(async()=>{}),ue(()=>{}),(m,e)=>{const P=de,d=pe,k=me,D=ve,I=fe,le=ge,se=ce;return $((u(),U("div",{class:"setting-div","element-loading-text":t(q)},[n(P,{modelValue:t(S),"onUpdate:modelValue":e[2]||(e[2]=s=>T(S)?S.value=s:null),title:"未发现依赖库"},{default:a(()=>[l("div",xe,[e[14]||(e[14]=l("span",null,"错误，依赖文件缺失!",-1)),l("div",Ae,[n(t(v),{type:"info",onClick:e[0]||(e[0]=s=>S.value=!1)},{default:a(()=>e[12]||(e[12]=[i("取消")])),_:1}),n(t(v),{type:"primary",onClick:e[1]||(e[1]=s=>t(G)())},{default:a(()=>e[13]||(e[13]=[i("依赖管理")])),_:1})])])]),_:1},8,["modelValue"]),e[30]||(e[30]=l("h3",{class:"setting-title"},"App",-1)),l("div",Be,[e[15]||(e[15]=l("span",null,"版本",-1)),l("span",null,[n(d,{type:t(C)?"info":"primary",class:"mr-5",size:"small"},{default:a(()=>[i(y(t(J)),1)]),_:1},8,["type"]),t(C)?(u(),w(d,{key:0,class:"mr-5",size:"small"},{default:a(()=>[i("最新版本："+y(t(M).app.latestVersion),1)]),_:1})):E("",!0),n(t(v),{link:"",type:"primary",onClick:e[3]||(e[3]=s=>t(te)(t(C)))},{default:a(()=>[i(y(t(C)?"前往":"检查")+"更新",1)]),_:1})])]),l("div",Ge,[e[16]||(e[16]=l("span",null,"开机自启",-1)),n(k,{modelValue:t(r),"onUpdate:modelValue":e[4]||(e[4]=s=>T(r)?r.value=s:null)},null,8,["modelValue"])]),l("div",Me,[e[19]||(e[19]=l("span",null,"依赖状态",-1)),l("span",null,[n(d,{type:t(V)(t(p).dependenceState),class:"mr-5",size:"small"},{default:a(()=>[i(y(t(p).dependenceState),1)]),_:1},8,["type"]),t(p).depHaveUpdate?(u(),w(d,{key:0,type:"warning",class:"mr-5",size:"small"},{default:a(()=>e[17]||(e[17]=[i("可更新")])),_:1})):E("",!0),n(t(v),{link:"",type:"primary",onClick:e[5]||(e[5]=s=>t(G)(t(p).depHaveUpdate?"haveUpdateDep":"lackDepDownload"))},{default:a(()=>e[18]||(e[18]=[i("依赖管理")])),_:1})])]),l("div",Le,[e[20]||(e[20]=l("span",null,"全局主题",-1)),n(k,{modelValue:t(f),"onUpdate:modelValue":e[6]||(e[6]=s=>T(f)?f.value=s:null),"active-icon":De,"inactive-icon":Ie,onChange:ee},null,8,["modelValue"])]),t(p).dependenceState!=="不可用"?(u(),U("h3",Ne," OCR服务 ")):E("",!0),t(p).dependenceState!=="不可用"?(u(),U("div",Oe,[e[21]||(e[21]=l("span",null,"运行方式",-1)),n(I,{modelValue:t(o).value,"onUpdate:modelValue":e[7]||(e[7]=s=>t(o).value=s),placeholder:"OCR运行方式",size:"small",class:"w120",onChange:h,disabled:t(p).dependenceState!=="完整版"},{default:a(()=>[(u(!0),U(H,null,F(t(o).options,s=>(u(),w(D,{key:s,label:s,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])])):E("",!0),$(l("div",Re,[e[22]||(e[22]=l("span",null,"GPU内存占用(MB)",-1)),n(le,{modelValue:t(o).gpuMemory,"onUpdate:modelValue":e[8]||(e[8]=s=>t(o).gpuMemory=s),min:1,size:"small"},null,8,["modelValue"])],512),[[re,t(o).value==="GPU"]]),e[31]||(e[31]=l("h3",{class:"setting-title"},"环境设置",-1)),l("div",$e,[e[24]||(e[24]=l("span",null,"工作目录",-1)),l("span",null,[n(d,{type:"info",class:"mr-5",size:"small"},{default:a(()=>[i(y(t(b).workDir),1)]),_:1}),n(t(v),{link:"",type:"primary",onClick:K},{default:a(()=>e[23]||(e[23]=[i("选择")])),_:1})])]),l("div",He,[e[26]||(e[26]=l("span",null,"截图保存路径",-1)),l("span",null,[n(d,{type:"info",class:"mr-5",size:"small"},{default:a(()=>[i(y(t(b).screenshotSavePath),1)]),_:1}),n(t(v),{link:"",type:"primary",onClick:Q},{default:a(()=>e[25]||(e[25]=[i("选择")])),_:1})])]),e[32]||(e[32]=l("h3",{class:"setting-title"},"显示",-1)),l("div",Fe,[e[27]||(e[27]=l("span",null,"在标题栏显示APP更新按钮",-1)),n(I,{modelValue:t(L).showUpdateInTitleBar,"onUpdate:modelValue":e[9]||(e[9]=s=>t(L).showUpdateInTitleBar=s),placeholder:"在标题栏显示APP更新按钮",size:"small",class:"w120"},{default:a(()=>[n(D,{label:"显示",value:!0}),n(D,{label:"不显示",value:!1})]),_:1},8,["modelValue"])]),e[33]||(e[33]=l("h3",{class:"setting-title"},"编辑器",-1)),l("div",Ye,[e[28]||(e[28]=l("span",null,"主题",-1)),n(I,{modelValue:t(_).theme.value,"onUpdate:modelValue":e[10]||(e[10]=s=>t(_).theme.value=s),placeholder:"编辑器主题",size:"small",class:"w120"},{default:a(()=>[(u(!0),U(H,null,F(t(_).theme.options,s=>(u(),w(D,{key:s,label:s,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),l("div",je,[e[29]||(e[29]=l("span",null,"点击运行时自动保存",-1)),n(k,{modelValue:t(_).runAutoSave,"onUpdate:modelValue":e[11]||(e[11]=s=>t(_).runAutoSave=s)},null,8,["modelValue"])])],8,Te)),[[se,t(W)]])}}}),Qe=A(Je,[["__scopeId","data-v-1a51c9a8"]]);export{Qe as default};
